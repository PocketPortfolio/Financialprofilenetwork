/* === Pocket Portfolio App (themeable, matches landing) ================== */

/* ==== Theme tokens ==== */
:root{
  /* Dark (default) — unchanged */
  --bg:#0b1220; --chrome:#0b1220; --text:#fff; --muted:#9aa4b3;
  --card:#0f172a; --card-border:#1f2937;
  --brand:#2563eb; --pos:#10b981; --neg:#ef4444;
  --table-zebra: color-mix(in srgb, var(--text) 3%, transparent);
  --base-fs: 100%;
}

/* ✅ Light: higher contrast & clearer separation */
[data-theme="light"]{
  --bg:#f5f7fb;              /* not pure white → helps separation */
  --chrome:#f5f7fb;
  --text:#0b1220;            /* very dark text */
  --muted:#334155;           /* darker muted for ≥4.5:1 on #fff/#f5f7fb */
  --card:#ffffff;            /* true white cards on soft bg */
  --card-border:#cbd5e1;     /* stronger borders */
  --brand:#2563eb;
  --pos:#10b981; --neg:#ef4444;
  --table-zebra:#eef2f7;     /* clearer zebra */
}

/* High contrast — unchanged */
[data-theme="contrast"]{
  --bg:#000; --chrome:#000; --text:#fff; --muted:#fff;
  --card:#000; --card-border:#fff; --brand:#ffd000; --pos:#00ff6a; --neg:#ff3b30;
  --table-zebra:#111;
}

/* System theme follows the same improved light tokens */
@media (prefers-color-scheme: light){
  :root:not([data-theme]){
    --bg:#f5f7fb; --chrome:#f5f7fb; --text:#0b1220; --muted:#334155;
    --card:#ffffff; --card-border:#cbd5e1; --table-zebra:#eef2f7; --brand:#2563eb;
  }
}

/* ==== Globals ==== */
html{ font-size:var(--base-fs); }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  background:var(--bg); color:var(--text);
}
*{ box-sizing:border-box; }
a{ color:var(--brand); }
.muted{ color:var(--muted); }
:focus-visible{ outline:2px solid var(--brand); outline-offset:2px; }
@media (prefers-reduced-motion: reduce){ *{ animation:none!important; transition:none!important; } }

/* ==== Visibility util ==== */
.hidden { display: none !important; }

/* ==== Enhanced Nav with Pocket Portfolio Branding ==== */
.pp-nav{
  position:sticky; top:0; z-index:50;
  backdrop-filter: blur(20px) saturate(1.2);
  background: linear-gradient(135deg, rgba(11, 18, 32, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%);
  border-bottom: 1px solid rgba(255, 107, 53, 0.2);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 107, 53, 0.1);
}
[data-theme="light"] .pp-nav,
:root:not([data-theme]) .pp-nav{   /* system light */
  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
  border-bottom: 3px solid #ff6b35 !important;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 0 4px 0 #ff6b35 !important;
}

.pp-nav-inner{
  max-width:1200px; margin:0 auto; height:64px;
  padding:0 16px; display:flex; align-items:center; justify-content:space-between;
}
.pp-brand{ 
  display:flex; 
  align-items:center; 
  gap:12px; 
  text-decoration: none;
  transition: all 0.2s ease;
}
.pp-brand:hover {
  transform: scale(1.02);
}
.pp-logo{ 
  width:44px; 
  height:44px; 
  display:block; 
  border-radius:8px;
  box-shadow: 0 2px 8px rgba(255, 107, 53, 0.2);
  transition: all 0.2s ease;
}
.pp-brand:hover .pp-logo {
  box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
}
.pp-wordmark{ height:20px; display:block; }
@media (max-width:520px){ .pp-wordmark{ display:none; } }

.pp-links{ display:flex; gap:8px; align-items:center; }
.pp-tab{
  appearance:none; 
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.8);
  padding: 10px 20px; 
  border-radius: 12px; 
  cursor: pointer; 
  font-weight: 500;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: none;
  transform: scale(1);
}
.pp-tab.active{ 
  background: linear-gradient(135deg, #ff6b35 0%, #f59e0b 100%);
  border: 1px solid rgba(255, 107, 53, 0.3);
  color: #fff;
  font-weight: 600;
  box-shadow: 0 4px 16px rgba(255, 107, 53, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  transform: scale(1.02);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}
.pp-tab:hover:not(.active) {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
  transform: scale(1.01);
}

/* Light theme navigation styling - Higher specificity */
[data-theme="light"] .pp-nav .pp-tab,
:root:not([data-theme]) .pp-nav .pp-tab {
  border: 2px solid rgba(255, 107, 53, 0.4) !important;
  background: #ff6b35 !important;
  color: white !important;
}

[data-theme="light"] .pp-nav .pp-tab.active,
:root:not([data-theme]) .pp-nav .pp-tab.active {
  background: linear-gradient(135deg, #ff6b35 0%, #f59e0b 100%) !important;
  border: 1px solid rgba(255, 107, 53, 0.3) !important;
  color: #fff !important;
  font-weight: 600 !important;
  box-shadow: 0 4px 16px rgba(255, 107, 53, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
  transform: scale(1.02) !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
}

[data-theme="light"] .pp-nav .pp-tab:hover:not(.active),
:root:not([data-theme]) .pp-nav .pp-tab:hover:not(.active) {
  background: #f59e0b !important;
  border-color: rgba(255, 107, 53, 0.6) !important;
  transform: scale(1.02) !important;
}

.pp-actions{ display:flex; align-items:center; gap:10px; }
.btn{
  border-radius:12px; 
  font-weight:600; 
  padding:10px 16px; 
  cursor:pointer;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.8);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: none;
  transform: scale(1);
}
.btn:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
  transform: scale(1.02);
}
.btn.primary{ 
  background: linear-gradient(135deg, #ff6b35 0%, #f59e0b 100%);
  border: 1px solid rgba(255, 107, 53, 0.3);
  color: #fff;
  box-shadow: 0 4px 16px rgba(255, 107, 53, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}
.btn.primary:hover {
  box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
  transform: scale(1.05);
}
.btn.danger{ 
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  border: 1px solid rgba(239, 68, 68, 0.3);
  color: #fff;
  box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}
.btn.danger:hover {
  box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
  transform: scale(1.05);
}

/* Light theme button styling - Higher specificity */
[data-theme="light"] .pp-nav .btn,
:root:not([data-theme]) .pp-nav .btn {
  border: 1px solid rgba(255, 107, 53, 0.2) !important;
  background: rgba(255, 107, 53, 0.05) !important;
  color: rgba(15, 23, 42, 0.8) !important;
}

[data-theme="light"] .pp-nav .btn:hover,
:root:not([data-theme]) .pp-nav .btn:hover {
  background: rgba(255, 107, 53, 0.1) !important;
  border-color: rgba(255, 107, 53, 0.3) !important;
  transform: scale(1.02) !important;
}

[data-theme="light"] .pp-nav .btn.primary,
:root:not([data-theme]) .pp-nav .btn.primary {
  background: linear-gradient(135deg, #ff6b35 0%, #f59e0b 100%) !important;
  border: 1px solid rgba(255, 107, 53, 0.3) !important;
  color: #fff !important;
  box-shadow: 0 4px 16px rgba(255, 107, 53, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
}

[data-theme="light"] .pp-nav .btn.primary:hover,
:root:not([data-theme]) .pp-nav .btn.primary:hover {
  box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
  transform: scale(1.05) !important;
}

/* ==== Layout / cards ==== */
.pp-main{ max-width:1200px; margin:24px auto; padding:0 16px; }
.card{
  background:var(--card); border:1px solid var(--card-border);
  border-radius:14px; padding:16px; margin:14px 0;
}
.card-title{ margin:0 0 12px; font-size:1.05rem; font-weight:700; }

/* ==== Metrics ==== */
.metrics{ display:grid; grid-template-columns: repeat(4,minmax(0,1fr)); gap:12px; }
.metric-card{
  background:var(--card); border:1px solid var(--card-border);
  border-radius:14px; padding:16px; text-align:center; font-size:1.05rem;
}

/* ==== Forms ==== */
#trade-form{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
#trade-form input[type="text"],
#trade-form input[type="date"],
#trade-form input[type="number"],
#trade-form select{
  background: color-mix(in srgb, var(--card) 85%, transparent);
  color:var(--text); border:1px solid var(--card-border); border-radius:10px; padding:8px 10px;
}
[data-theme="light"] #trade-form input[type="text"],
[data-theme="light"] #trade-form input[type="date"],
[data-theme="light"] #trade-form input[type="number"],
[data-theme="light"] #trade-form select,
:root:not([data-theme]) #trade-form input[type="text"],
:root:not([data-theme]) #trade-form input[type="date"],
:root:not([data-theme]) #trade-form input[type="number"],
:root:not([data-theme]) #trade-form select{
  background:#fff;                 /* solid controls on light */
  border-color:#cbd5e1;
}
#trade-form input::placeholder{ color:var(--muted); }
#trade-form .inline{ display:inline-flex; align-items:center; gap:6px; }
#trade-form .csv{ margin-left:auto; display:flex; gap:10px; align-items:center; }

/* ==== Tables ==== */
.table-wrap{ overflow-x:auto; -webkit-overflow-scrolling:touch; background:var(--card); border:1px solid var(--card-border); border-radius:14px; padding:8px; }
.data-table{ width:100%; border-collapse:separate; border-spacing:0; min-width:640px; }
.data-table thead th{
  text-align:left; font-weight:600; font-size:.9rem; color:var(--muted);
  background:var(--card); border-bottom:1px solid var(--card-border); padding:10px 12px;
}
.data-table tbody td{ padding:10px 12px; border-bottom:1px solid var(--card-border); }
.data-table tbody tr:nth-child(odd){ background:var(--table-zebra); }

/* ==== Chart ==== */
#asset-chart{ max-width:100%; display:block; margin:12px auto; }

/* ==== News grid ==== */
.news-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:12px; }
.news-card{ display:flex; gap:12px; background:var(--card); border:1px solid var(--card-border); padding:10px; border-radius:12px; }
.news-card__img{ width:96px; height:96px; object-fit:cover; border-radius:8px; flex:0 0 auto; }
.news-card__title{ margin:0 0 6px; font-size:.95rem; line-height:1.25; }
.news-card__meta{ color:var(--muted); font-size:.85rem; margin-bottom:4px; }
.news-card__link{ font-size:.9rem; color:var(--brand); text-decoration:none; }
.news-card__link:hover{ text-decoration:underline; }

/* ==== Responsive ==== */
@media (max-width: 900px){ .metrics{ grid-template-columns: repeat(2,minmax(0,1fr)); } }
@media (max-width: 520px){
  .metrics{ grid-template-columns:1fr; }
  #trade-form{ flex-direction:column; align-items:stretch; }
  #trade-form .csv{ margin-left:0; justify-content:space-between; width:100%; }
}

/* Dashboard form responsive styles */
@media (max-width: 768px) {
  .dashboard-form {
    grid-template-columns: 1fr !important;
    align-items: stretch !important;
  }
  
  .dashboard-form-grid {
    grid-template-columns: 1fr !important;
  }
  
  .dashboard-form-grid-2 {
    grid-template-columns: 1fr !important;
  }
}

@media (max-width: 480px) {
  .dashboard-form-container {
    padding: 20px !important;
  }
  
  .dashboard-form-title {
    font-size: 20px !important;
  }
  
  .dashboard-form-input {
    padding: 14px 12px !important;
    font-size: 14px !important;
  }
  
  .dashboard-form-button {
    padding: 16px 20px !important;
    font-size: 15px !important;
  }
}

/* Email aesthetics (profile) */
#user-email { color: var(--muted); font-size: .9rem; }

.chg-pos{ color:var(--pos); }
.chg-neg{ color:var(--neg); }


/* optional: use inside the app if a dark visual appears in light mode */
.on-dark{
  color:#fff;
  --text:#fff;
  --muted:#cbd5e1;
  --card: color-mix(in srgb, #0b1220 75%, transparent);
  --card-border: color-mix(in srgb, #ffffff 20%, transparent);
}
/* --- Health widget --- */
.health-row { display:flex; align-items:center; gap:.75rem; margin:.35rem 0; }
.health-updated { margin-top:.25rem; font-size:.85rem; }

/* Chips */
.badge { display:inline-flex; align-items:center; gap:.35rem; padding:.15rem .5rem; border-radius:.5rem; font-size:.8rem; font-weight:600; }
.badge.success { background:#0d6b3b; color:#fff; }    /* green */
.badge.warn    { background:#a36400; color:#fff; }    /* amber */
.badge.danger  { background:#8a1c1c; color:#fff; }    /* red */

/* Tiny spinner dot next to the title while refreshing */
.health-spinner {
  width:.55rem; height:.55rem; margin-left:.5rem; border-radius:50%;
  background: currentColor; opacity:0; transform:scale(.6);
}
.health-spinner.on {
  animation: healthPulse 1.2s ease-in-out infinite;
  opacity:.7;
}
@keyframes healthPulse {
  0%   { transform: scale(.6);   opacity:.3; }
  50%  { transform: scale(1.0);  opacity: .9; }
  100% { transform: scale(.6);   opacity:.3; }
}

