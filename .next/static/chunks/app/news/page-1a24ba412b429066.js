(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{7639:function(e,t,r){Promise.resolve().then(r.bind(r,5603))},7429:function(e,t,r){"use strict";r.d(t,{$C:function(){return l},Kg:function(){return i},vR:function(){return a}});var n=r(2265);function a(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let[t,r]=(0,n.useState)(null),[a,i]=(0,n.useState)(!1),[l,s]=(0,n.useState)(null),o=(0,n.useRef)(null),c=(0,n.useRef)(!0),u=(0,n.useRef)(0),d=(0,n.useMemo)(()=>(null==e?void 0:e.join(","))||"",[e]),f=(0,n.useCallback)(async()=>{if(!c.current)return;if(!e||0===e.length){r({}),i(!1),s(null);return}let t=Date.now(),n="quotes_".concat(d),a=localStorage.getItem(n);if(a&&t-u.current<6e5)try{let e=JSON.parse(a);if(c.current){r(e);return}}catch(e){}i(!0),s(null);try{let a=e.join(","),i=await fetch("/api/quote?symbols=".concat(a));if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));let l=await i.json();if(c.current){let e={};l.forEach(t=>{e[t.symbol]=t}),r(e),localStorage.setItem(n,JSON.stringify(e)),u.current=t}}catch(e){c.current&&s(e instanceof Error?e.message:"Failed to fetch quotes")}finally{c.current&&i(!1)}},[d]);return(0,n.useEffect)(()=>(c.current=!0,f(),()=>{c.current=!1,o.current&&clearInterval(o.current)}),[d]),{data:t,loading:a,error:l,refetch:f}}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,[r,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[s,o]=(0,n.useState)(null),c=(0,n.useRef)(null),u=(0,n.useRef)(!0),d=(0,n.useRef)(0),f=(0,n.useMemo)(()=>e.join(","),[e]),x=(0,n.useCallback)(async()=>{if(!u.current)return;let r=Date.now(),n="news_".concat(f,"_").concat(t),i=localStorage.getItem(n);if(i&&r-d.current<9e5)try{let e=JSON.parse(i);if(u.current){a(e);return}}catch(e){}l(!0),o(null);try{let i=new URLSearchParams;e.length>0&&i.append("tickers",f),i.append("limit",t.toString());let l=await fetch("/api/news?".concat(i));if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));let s=await l.json();u.current&&(a(s),localStorage.setItem(n,JSON.stringify(s)),d.current=r)}catch(e){u.current&&o(e instanceof Error?e.message:"Failed to fetch news")}finally{u.current&&l(!1)}},[f,t]);return(0,n.useEffect)(()=>(u.current=!0,x(),()=>{u.current=!1,c.current&&clearInterval(c.current)}),[f,t]),{data:r,loading:i,error:s,refetch:x}}function l(){let[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!1),[i,l]=(0,n.useState)(null),s=(0,n.useRef)(null),o=(0,n.useRef)(!0),c=(0,n.useRef)(0),u=(0,n.useCallback)(async()=>{if(!o.current)return;let e=Date.now(),r="market_data_most_traded",n=localStorage.getItem(r);if(n&&e-c.current<9e5)try{let e=JSON.parse(n);if(o.current){t(e);return}}catch(e){}a(!0),l(null);try{let n=await fetch("/api/most-traded?count=10&region=US");if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let a=await n.json();o.current&&(t(a),localStorage.setItem(r,JSON.stringify(a)),c.current=e)}catch(e){o.current&&l(e instanceof Error?e.message:"Failed to fetch market data")}finally{o.current&&a(!1)}},[]);return(0,n.useEffect)(()=>(o.current=!0,u(),()=>{o.current=!1,s.current&&clearInterval(s.current)}),[]),{data:e,loading:r,error:i,refetch:u}}},5603:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437),a=r(2265),i=r(4330),l=r(7429),s=r(8483),o=r(3599);function c(){let{isAuthenticated:e,signInWithGoogle:t}=(0,i.a)(),{data:r}=(0,l.vR)(["AAPL","GOOGL","MSFT","TSLA","NVDA"]),[c,u]=(0,a.useState)([]),[d,f]=(0,a.useState)(!0),[x,p]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let t=async()=>{try{f(!0);let e=await fetch("/api/news");if(!e.ok)throw Error("Failed to fetch news");let t=await e.json();u(t.articles||[])}catch(e){p(e instanceof Error?e.message:"Failed to fetch news")}finally{f(!1)}};e&&t()},[e]),e)?(0,n.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",background:"var(--bg)",color:"var(--text)"},children:[(0,n.jsx)(s.Z,{title:"News - Pocket Portfolio",description:"Stay updated with the latest financial news and market insights"}),(0,n.jsx)(o.Z,{}),(0,n.jsxs)("main",{style:{flex:1,padding:"20px",maxWidth:"1200px",margin:"0 auto",width:"100%"},children:[(0,n.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,n.jsx)("h1",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"12px",color:"var(--text)"},children:"Financial News"}),(0,n.jsx)("p",{style:{color:"var(--muted)",fontSize:"18px"},children:"Stay updated with the latest market news and insights"})]}),d?(0,n.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"12px",padding:"40px",textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"24px",marginBottom:"16px"},children:"⏳"}),(0,n.jsx)("p",{children:"Loading latest news..."})]}):x?(0,n.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"12px",padding:"40px",textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"24px",marginBottom:"16px"},children:"❌"}),(0,n.jsx)("h3",{style:{fontSize:"20px",marginBottom:"8px"},children:"Error loading news"}),(0,n.jsx)("p",{style:{color:"var(--muted)",marginBottom:"24px"},children:x}),(0,n.jsx)("button",{onClick:()=>window.location.reload(),style:{background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]}):0===c.length?(0,n.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"12px",padding:"40px",textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCF0"}),(0,n.jsx)("h3",{style:{fontSize:"20px",marginBottom:"8px"},children:"No news available"}),(0,n.jsx)("p",{style:{color:"var(--muted)",marginBottom:"24px"},children:"Check back later for the latest financial news"})]}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:c.map((e,t)=>(0,n.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"12px",padding:"20px",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>window.open(e.url,"_blank"),children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[(0,n.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",margin:0,color:"var(--text)",lineHeight:"1.4"},children:e.title}),(0,n.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",whiteSpace:"nowrap",marginLeft:"16px"},children:new Date(e.publishedAt).toLocaleDateString()})]}),e.description&&(0,n.jsx)("p",{style:{color:"var(--muted)",fontSize:"14px",margin:"0 0 12px 0",lineHeight:"1.5"},children:e.description}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"var(--muted)"},children:[(0,n.jsx)("span",{children:e.source}),(0,n.jsx)("span",{style:{color:"var(--accent-warm)"},children:"Read more →"})]})]},t))})]})]}):(0,n.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",background:"var(--bg)",color:"var(--text)"},children:[(0,n.jsx)(s.Z,{title:"News - Pocket Portfolio",description:"Stay updated with the latest financial news and market insights"}),(0,n.jsx)(o.Z,{}),(0,n.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("h1",{style:{fontSize:"24px",marginBottom:"16px"},children:"Sign in to view news"}),(0,n.jsx)("p",{style:{color:"var(--muted)",marginBottom:"24px"},children:"Stay updated with the latest financial news and market insights"}),(0,n.jsx)("button",{onClick:t,style:{background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Sign in with Google"})]})})]})}}},function(e){e.O(0,[358,139,726,244,958,521,971,117,744],function(){return e(e.s=7639)}),_N_E=e.O()}]);