(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1523:function(e,t,r){Promise.resolve().then(r.bind(r,2625))},7268:function(e,t,r){"use strict";r.d(t,{ZP:function(){return n},zU:function(){return i}});var a=r(7437);function n(e){let{type:t,data:r}=e;return(0,a.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify((()=>{let e={"@context":"https://schema.org","@type":t,...r};switch(t){case"Organization":return{...e,"@type":"Organization",name:"Pocket Portfolio",url:"https://pocketportfolio.app",logo:"https://pocketportfolio.app/brand/pp-wordmark.svg",description:"Open-source, community-led investing dashboard with live P/L, mock trades, prices, and insights.",sameAs:["https://github.com/pocketportfolio","https://discord.gg/Ch9PpjRzwe"],contactPoint:{"@type":"ContactPoint",contactType:"Customer Service",url:"https://pocketportfolio.app"}};case"WebSite":return{...e,"@type":"WebSite",name:"Pocket Portfolio",url:"https://pocketportfolio.app",description:"Open-source, community-led investing dashboard",potentialAction:{"@type":"SearchAction",target:"https://pocketportfolio.app/search?q={search_term_string}","query-input":"required name=search_term_string"}};case"WebApplication":return{...e,"@type":"WebApplication",name:"Pocket Portfolio",url:"https://pocketportfolio.app",applicationCategory:"FinanceApplication",operatingSystem:"Web Browser",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},featureList:["Portfolio Tracking","Live Price Updates","CSV Import","Mock Trading","News Integration","Privacy-First Design"]};case"Product":return{...e,"@type":"Product",name:"Pocket Portfolio",description:"Open-source, community-led investing dashboard",brand:{"@type":"Brand",name:"Pocket Portfolio"},offers:{"@type":"Offer",price:"0",priceCurrency:"USD",availability:"https://schema.org/InStock"}};case"Article":return{...e,"@type":"Article",headline:r.headline,description:r.description,author:{"@type":"Organization",name:"Pocket Portfolio Team"},publisher:{"@type":"Organization",name:"Pocket Portfolio",logo:{"@type":"ImageObject",url:"https://pocketportfolio.app/brand/pp-wordmark.svg"}},datePublished:r.datePublished||new Date().toISOString(),dateModified:r.dateModified||new Date().toISOString()};case"FAQPage":var a;return{...e,"@type":"FAQPage",mainEntity:(null===(a=r.faqs)||void 0===a?void 0:a.map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}})))||[]};default:return e}})())}})}let i={name:"Pocket Portfolio",url:"https://pocketportfolio.app",applicationCategory:"FinanceApplication",operatingSystem:"Web Browser",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},featureList:["Portfolio Tracking","Live Price Updates","CSV Import","Mock Trading","News Integration","Privacy-First Design"]}},2625:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var a=r(7437),n=r(2265),i=r(7648);function o(e){let t,r,{positions:n}=e,i=n.reduce((e,t)=>e+t.currentValue,0),o=n.filter(e=>e.shares>0&&e.currentValue>0);if(0===o.length)return(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",background:"var(--bg)",borderRadius:"8px",border:"1px solid var(--border)",color:"var(--muted)",fontSize:"14px"},children:"No positions to display"});let l=o.map(e=>({...e,value:e.currentValue,percentage:e.currentValue/i*100})).sort((e,t)=>t.value-e.value),s=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"];if(1===l.length){let e=l[0];return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",padding:"16px"},children:[(0,a.jsx)("div",{style:{position:"relative"},children:(0,a.jsx)("svg",{width:"200",height:"200",viewBox:"0 0 200 200",children:(0,a.jsx)("circle",{cx:"100",cy:"100",r:"80",fill:s[0],stroke:"white",strokeWidth:"4",style:{filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.1))"}})})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"var(--surface-elevated)",borderRadius:"8px",border:"1px solid var(--border-subtle)"},children:[(0,a.jsx)("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:s[0],flexShrink:0}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:e.ticker}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)"},children:[e.percentage.toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"12px",background:"var(--surface-elevated)",borderRadius:"8px",border:"1px solid var(--border-subtle)"},children:[(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",marginBottom:"2px"},children:"Total Value"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:["$",i.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",marginBottom:"2px"},children:"Positions"}),(0,a.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:o.length})]})]})]})}let d=(e,t,r,a,n)=>{let i=c(a,n,r,t),o=c(a,n,r,e),l=t-e<=180?"0":"1";return["M",a,n,"L",i.x,i.y,"A",r,r,0,l,0,o.x,o.y,"Z"].join(" ")},c=(e,t,r,a)=>{let n=(a-90)*Math.PI/180;return{x:e+r*Math.cos(n),y:t+r*Math.sin(n)}};return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",padding:"16px"},children:[(0,a.jsx)("div",{style:{position:"relative"},children:(0,a.jsxs)("svg",{width:"200",height:"200",viewBox:"0 0 200 200",style:{filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.1))"},children:[(0,a.jsx)("g",{transform:"translate(2, 2)",children:(t=0,l.map((e,r)=>{let n=e.percentage/100*360,i=t+n,o=d(t,i,80,100,100);return t=i,(0,a.jsx)("path",{d:o,fill:"rgba(0,0,0,0.1)",stroke:"none"},"shadow-".concat(e.ticker))}))}),(0,a.jsx)("g",{children:(r=0,l.map((e,t)=>{let n=e.percentage/100*360,i=r+n,o=d(r,i,80,100,100);return r=i,(0,a.jsx)("path",{d:o,fill:s[t%s.length],stroke:"white",strokeWidth:"2",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))",transition:"all 0.2s ease"}},e.ticker)}))})]})}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px",width:"100%",maxWidth:"400px"},children:l.slice(0,6).map((e,t)=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",background:"var(--surface-elevated)",borderRadius:"4px",border:"1px solid var(--border-subtle)"},children:[(0,a.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:s[t%s.length],flexShrink:0}}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0},children:[(0,a.jsx)("span",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.ticker}),(0,a.jsxs)("span",{style:{fontSize:"10px",color:"var(--muted)"},children:[e.percentage.toFixed(1),"%"]})]})]},e.ticker))}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"12px",background:"var(--surface-elevated)",borderRadius:"8px",border:"1px solid var(--border-subtle)"},children:[(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",marginBottom:"2px"},children:"Total Value"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:["$",i.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",marginBottom:"2px"},children:"Positions"}),(0,a.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:o.length})]})]})]})}function l(e){let{positions:t,type:r}=e;return 0===t.length?(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",color:"var(--muted)",fontSize:"16px"},children:"Portfolio visualization will appear here once you have trades."}):"pie"===r?(0,a.jsx)(s,{positions:t}):(0,a.jsx)(d,{positions:t})}function s(e){let{positions:t}=e,r=t.reduce((e,t)=>e+t.currentValue,0),n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"],i=0,o=t.map((e,t)=>{let a=e.currentValue/r*100,o=3.6*i,l=(i+a)*3.6;return i+=a,{pathData:["M ".concat(150," ").concat(150),"L ".concat(150+120*Math.cos((o-90)*Math.PI/180)," ").concat(150+120*Math.sin((o-90)*Math.PI/180)),"A ".concat(120," ").concat(120," 0 ").concat(a>50?1:0," 1 ").concat(150+120*Math.cos((l-90)*Math.PI/180)," ").concat(150+120*Math.sin((l-90)*Math.PI/180)),"Z"].join(" "),color:n[t%n.length],percentage:a.toFixed(1),ticker:e.ticker,value:e.currentValue,pl:e.unrealizedPL,plPercent:e.unrealizedPLPercent}});return(0,a.jsxs)("div",{className:"portfolio-allocation",style:{display:"flex",gap:"16px",alignItems:"flex-start",flexWrap:"wrap",maxWidth:"100%",overflow:"hidden"},children:[(0,a.jsx)("div",{className:"portfolio-chart",style:{flex:"0 0 auto",display:"flex",justifyContent:"center",minWidth:"180px",maxWidth:"200px"},children:(0,a.jsx)("svg",{width:"200",height:"200",viewBox:"0 0 300 300",style:{maxWidth:"100%",height:"auto"},children:o.map((e,t)=>(0,a.jsx)("path",{d:e.pathData,fill:e.color,stroke:"var(--bg)",strokeWidth:"3",style:{cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"}},e.ticker))})}),(0,a.jsxs)("div",{className:"portfolio-legend",style:{flex:"1",minWidth:"200px",maxWidth:"280px",overflow:"hidden"},children:[(0,a.jsx)("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"12px",color:"var(--text)",textAlign:"left"},children:"Portfolio Allocation"}),(0,a.jsx)("div",{className:"portfolio-items",style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.map((e,t)=>(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",padding:"4px 0"},children:[(0,a.jsx)("div",{style:{width:"16px",height:"16px",backgroundColor:e.color,borderRadius:"4px",flexShrink:0}}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:0},children:[(0,a.jsx)("span",{style:{fontWeight:"600",color:"var(--text)",fontSize:"14px"},children:e.ticker}),(0,a.jsxs)("span",{style:{color:"var(--muted)",fontSize:"13px",fontWeight:"500"},children:[e.percentage,"%"]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",textAlign:"right"},children:[(0,a.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:["$",e.value.toFixed(2)]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:e.pl>=0?"var(--pos)":"var(--neg)",fontWeight:"500"},children:[e.pl>=0?"+":"","$",e.pl.toFixed(2)]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:e.pl>=0?"var(--pos)":"var(--neg)",fontWeight:"500"},children:["(",e.pl>=0?"+":"",e.plPercent.toFixed(2),"%)"]})]})]},e.ticker))})]})]})}function d(e){let{positions:t}=e,r=[{date:"2025-01-01",value:5e3},{date:"2025-01-02",value:5100},{date:"2025-01-03",value:4950},{date:"2025-01-04",value:5200},{date:"2025-01-05",value:5300},{date:"2025-01-06",value:5250},{date:"2025-01-07",value:5492}],n=Math.max(...r.map(e=>e.value)),i=Math.min(...r.map(e=>e.value)),o=n-i,l=r.map((e,t)=>({x:40+t/(r.length-1)*520,y:40+(n-e.value)/o*120,...e})),s=l.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(e.x," ").concat(e.y)).join(" ");return(0,a.jsxs)("div",{style:{width:"100%"},children:[(0,a.jsx)("h4",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"16px",color:"var(--text)"},children:"Portfolio Value Over Time"}),(0,a.jsxs)("svg",{width:600,height:200,viewBox:"0 0 ".concat(600," ").concat(200),children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"50",height:"20",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 50 0 L 0 0 0 20",fill:"none",stroke:"var(--card-border)",strokeWidth:"0.5"})})}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),(0,a.jsx)("path",{d:s,fill:"none",stroke:"#ff6b35",strokeWidth:"3"}),l.map((e,t)=>(0,a.jsx)("circle",{cx:e.x,cy:e.y,r:"4",fill:"#ff6b35",stroke:"var(--bg)",strokeWidth:"2"},t)),(0,a.jsxs)("text",{x:40,y:40,fontSize:"12",fill:"var(--muted)",children:["$",n.toFixed(0)]}),(0,a.jsxs)("text",{x:40,y:160,fontSize:"12",fill:"var(--muted)",children:["$",i.toFixed(0)]}),(0,a.jsx)("text",{x:300,y:190,fontSize:"12",fill:"var(--muted)",textAnchor:"middle",children:"Time"})]}),(0,a.jsx)("div",{style:{marginTop:"16px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:t.map((e,t)=>(0,a.jsxs)("div",{style:{background:"var(--bg)",border:"1px solid var(--card-border)",borderRadius:"6px",padding:"12px",textAlign:"center"},children:[(0,a.jsx)("div",{style:{fontWeight:"500",color:"var(--text)"},children:e.ticker}),(0,a.jsxs)("div",{style:{fontSize:"14px",color:"var(--muted)"},children:["$",e.currentValue.toFixed(2)]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:e.unrealizedPL>=0?"var(--pos)":"var(--neg)"},children:[e.unrealizedPL>=0?"+":"","$",e.unrealizedPL.toFixed(2)]})]},e.ticker))})]})}let c=[{symbol:"AAPL",name:"Apple Inc."},{symbol:"GOOGL",name:"Alphabet Inc."},{symbol:"MSFT",name:"Microsoft Corporation"},{symbol:"TSLA",name:"Tesla, Inc."},{symbol:"NVDA",name:"NVIDIA Corporation"},{symbol:"AMZN",name:"Amazon.com, Inc."},{symbol:"META",name:"Meta Platforms, Inc."},{symbol:"BTC",name:"Bitcoin"},{symbol:"ETH",name:"Ethereum"},{symbol:"SPY",name:"SPDR S&P 500 ETF Trust"}];function p(e){let{onTickerSelect:t,placeholder:r="Search stocks or crypto..."}=e,[i,o]=(0,n.useState)(""),[l,s]=(0,n.useState)([]),[d,p]=(0,n.useState)(!1),[x,g]=(0,n.useState)(!1),u=(0,n.useRef)(null),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.useEffect)(()=>{if(i.length<2){s([]);return}let e=setTimeout(async()=>{g(!0);try{let e=c.filter(e=>e.symbol.toLowerCase().includes(i.toLowerCase())||e.name.toLowerCase().includes(i.toLowerCase())).map(e=>({symbol:e.symbol,name:e.name,type:"Stock",region:"US",currency:"USD",matchScore:1}));if(e.length>0)s(e.slice(0,8));else try{let e=await fetch("/api/search?q=".concat(encodeURIComponent(i)));if(e.ok){let t=(await e.json()).map(e=>({symbol:e.symbol,name:e.name,type:"crypto"===e.type?"Crypto":"Stock",region:"US",currency:e.currency||"USD",matchScore:.9}));s(t.slice(0,8))}else{let e=[{symbol:i.toUpperCase(),name:"".concat(i.toUpperCase()," Inc."),type:"Stock",region:"US",currency:"USD",matchScore:.8}];s(e)}}catch(t){let e=[{symbol:i.toUpperCase(),name:"".concat(i.toUpperCase()," Inc."),type:"Stock",region:"US",currency:"USD",matchScore:.8}];s(e)}}catch(e){s([])}finally{g(!1)}},300);return()=>clearTimeout(e)},[i]);let v=e=>{o(e.symbol),p(!1),t(e.symbol)};return(0,a.jsxs)("div",{ref:u,style:{position:"relative",width:"100%",zIndex:9999,overflow:"visible"},children:[(0,a.jsx)("input",{ref:h,type:"text",value:i,onChange:e=>{let t=e.target.value;o(t),p(t.length>0)},onKeyDown:e=>{"Enter"===e.key&&i&&(t(i.toUpperCase()),p(!1))},onFocus:e=>{p(i.length>0),e.target.style.borderColor="var(--brand)"},placeholder:r,style:{width:"100%",padding:"8px",border:"1px solid var(--card-border)",borderRadius:"6px",background:"var(--bg)",color:"var(--text)",fontSize:"12px",fontWeight:"500",outline:"none",transition:"all 0.2s ease",boxSizing:"border-box"},onBlur:e=>e.target.style.borderColor="var(--card-border)"}),d&&(0,a.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"var(--card)",border:"2px solid var(--accent-warm)",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 8px 24px rgba(245, 158, 11, 0.3)",zIndex:9999999,maxHeight:"200px",overflow:"hidden",transform:"translateZ(0)"},children:[l.length>0&&(0,a.jsxs)("div",{style:{padding:"8px 12px",fontSize:"12px",color:"var(--muted)",background:"var(--surface)",borderBottom:"1px solid var(--card-border)"},children:["Found ",l.length," result",1!==l.length?"s":""]}),(0,a.jsx)("div",{style:{maxHeight:"180px",overflowY:"auto"},children:x?(0,a.jsxs)("div",{style:{padding:"16px",textAlign:"center",color:"var(--muted)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px"},children:[(0,a.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid var(--muted)",borderTop:"2px solid var(--brand)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Searching..."]}):l.length>0?l.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>v(e),style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",borderBottom:t<l.length-1?"1px solid var(--card-border)":"none",transition:"all 0.2s ease",fontSize:"14px",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"0"},onMouseEnter:e=>{e.currentTarget.style.background="var(--warm-bg)",e.currentTarget.style.color="var(--text-warm)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text)"},children:[(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("div",{style:{fontWeight:"600",fontSize:"16px",color:"var(--text)",marginBottom:"4px"},children:e.symbol}),(0,a.jsx)("div",{style:{fontSize:"14px",color:"var(--muted)",lineHeight:"1.4"},children:e.name})]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)",textAlign:"right",whiteSpace:"nowrap",marginLeft:"12px"},children:[e.type," • ",e.region]})]},t)):i.length>=2?(0,a.jsxs)("div",{style:{padding:"20px 16px",textAlign:"center",color:"var(--muted)",fontSize:"14px"},children:[(0,a.jsx)("div",{style:{marginBottom:"8px",fontSize:"16px"},children:"\uD83D\uDD0D"}),'No results found for "',i,'"']}):null})]})]})}var x=r(2226),g=r(5978),u=r(3301),h=r(7835);class v{static async deleteUserData(e){try{let t=(0,g.qs)(h.db),r=(0,g.IO)((0,g.hJ)(h.db,"trades"),(0,g.ar)("uid","==",e));(await (0,g.PL)(r)).docs.forEach(e=>{t.delete(e.ref)}),await t.commit()}catch(e){throw e}}static async exportUserData(e){try{let t=(0,g.IO)((0,g.hJ)(h.db,"trades"),(0,g.ar)("uid","==",e)),r=(await (0,g.PL)(t)).docs.map(e=>({id:e.id,...e.data()}));r.sort((e,t)=>{var r,a;let n=(null===(r=e.createdAt)||void 0===r?void 0:r.toDate)?e.createdAt.toDate().getTime():0;return((null===(a=t.createdAt)||void 0===a?void 0:a.toDate)?t.createdAt.toDate().getTime():0)-n});let a=r.length,n=r.reduce((e,t)=>e+t.qty*t.price,0),i=new Set(r.map(e=>e.ticker)).size;return{trades:r,portfolios:[],watchlists:[],preferences:[],totalTrades:a,totalInvested:n,totalPositions:i,exportDate:new Date().toISOString(),userId:e}}catch(e){throw e}}static async deleteAccount(e){try{let t=e.uid;await this.deleteUserData(t),await (0,u.h8)(e)}catch(e){if((null==e?void 0:e.code)==="auth/requires-recent-login")throw Error("Please sign out and sign back in, then try deleting your account again. This is required for security.");throw e}}static downloadUserData(e,t){let r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=t||"pocket-portfolio-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}static downloadTradesCSV(e,t){if(0===e.length)throw Error("No trades to export");let r=new Blob([["Date,Ticker,Type,Currency,Quantity,Price,Mock,Created At",...e.map(e=>{var t,r,a;return[e.date,e.ticker,e.type,e.currency,e.qty,e.price,e.mock,(null===(a=e.createdAt)||void 0===a?void 0:null===(r=a.toDate)||void 0===r?void 0:null===(t=r.call(a))||void 0===t?void 0:t.toISOString())||new Date().toISOString()].join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=t||"pocket-portfolio-trades-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}}let m=e=>{let{isOpen:t,title:r,message:n,confirmText:i,cancelText:o,type:l,onConfirm:s,onCancel:d,isLoading:c=!1}=e;return t?(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",border:"2px solid var(--border-warm)",borderRadius:"16px",padding:"32px",maxWidth:"520px",width:"100%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(245, 158, 11, 0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[(0,a.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"delete"===l?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"20px",boxShadow:"delete"===l?"0 4px 12px rgba(239, 68, 68, 0.3)":"0 4px 12px rgba(245, 158, 11, 0.3)"},children:"delete"===l?(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M12 9v3m0 3v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"var(--neg)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"var(--brand)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,a.jsx)("h3",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:"0 0 4px 0",letterSpacing:"-0.5px"},children:r})]}),(0,a.jsx)("p",{style:{color:"var(--text-secondary)",lineHeight:"1.6",marginBottom:"24px",fontSize:"15px",fontWeight:"500"},children:n}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end",alignItems:"center"},children:[(0,a.jsx)("button",{onClick:d,disabled:c,style:{padding:"14px 28px",background:"transparent",border:"2px solid var(--border-warm)",color:"var(--text-warm)",borderRadius:"12px",fontSize:"15px",fontWeight:"600",cursor:c?"not-allowed":"pointer",opacity:c?.5:1,transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.2)",minWidth:"100px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{c||(e.currentTarget.style.background="rgba(245, 158, 11, 0.1)",e.currentTarget.style.borderColor="var(--accent-warm)",e.currentTarget.style.color="var(--accent-warm)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)")},onMouseLeave:e=>{c||(e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="var(--border-warm)",e.currentTarget.style.color="var(--text-warm)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(245, 158, 11, 0.2)")},children:o}),(0,a.jsxs)("button",{onClick:s,disabled:c,style:{padding:"14px 28px",background:"delete"===l?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",border:"delete"===l?"2px solid #dc2626":"2px solid var(--border-warm)",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:c?"not-allowed":"pointer",opacity:c?.5:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"delete"===l?"0 4px 12px rgba(239, 68, 68, 0.3)":"0 4px 12px rgba(245, 158, 11, 0.3)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.2)",minWidth:"140px",height:"48px"},onMouseEnter:e=>{c||("delete"===l?(e.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.4)"):(e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(245, 158, 11, 0.4)"))},onMouseLeave:e=>{c||("delete"===l?(e.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"):(e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)"))},children:[c&&(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"spin 1s linear infinite"}})}),i]})]})]})}):null};function y(e){let{user:t,trades:r,onAccountDeleted:i}=e,[o,l]=(0,n.useState)(!1),[s,d]=(0,n.useState)(!1),[c,p]=(0,n.useState)(!1),[x,g]=(0,n.useState)(!1),[u,h]=(0,n.useState)("json"),[y,f]=(0,n.useState)(!1),b=async()=>{p(!0);try{await v.deleteAccount(t),l(!1),i?i():window.location.href="/"}catch(e){alert(e instanceof Error?e.message:"Failed to delete account. Please try again."),p(!1)}},j=async()=>{g(!0);try{let e=await v.exportUserData(t.uid);"json"===u?v.downloadUserData(e):v.downloadTradesCSV(e.trades),d(!1)}catch(e){alert("Failed to export data. Please try again.")}finally{g(!1)}},w=(null==r?void 0:r.filter(e=>!e.mock))||[],S=w.reduce((e,t)=>{let{ticker:r,qty:a,price:n,type:i}=t;if(e[r]||(e[r]={ticker:r,shares:0,avgCost:0,currency:t.currency||"USD"}),"BUY"===i){let t=e[r].shares*e[r].avgCost+a*n;e[r].shares+=a,e[r].avgCost=t/e[r].shares}else e[r].shares-=a;return e},{}),k=Object.values(S).reduce((e,t)=>e+t.avgCost*t.shares,0),z=w.length,T=Object.keys(S).length;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",border:"2px solid var(--border-warm)",borderRadius:"16px",padding:"28px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(245, 158, 11, 0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[(0,a.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"20px",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:(0,a.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:"0 0 6px 0",letterSpacing:"-0.5px"},children:"Account Management"}),(0,a.jsx)("p",{style:{fontSize:"16px",color:"var(--text-warm)",margin:0,fontWeight:"500"},children:t.displayName||t.email})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"20px",marginBottom:"28px",padding:"24px",background:"var(--warm-bg)",borderRadius:"12px",border:"1px solid var(--border-warm)"},children:[(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px auto",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:(0,a.jsx)("span",{style:{fontSize:"20px"},children:"\uD83D\uDCCA"})}),(0,a.jsx)("p",{style:{fontSize:"14px",color:"var(--text-warm)",margin:"0 0 6px 0",fontWeight:"600"},children:"Trades"}),(0,a.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:0},children:z})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px auto",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:(0,a.jsx)("span",{style:{fontSize:"20px"},children:"\uD83D\uDCB0"})}),(0,a.jsx)("p",{style:{fontSize:"14px",color:"var(--text-warm)",margin:"0 0 6px 0",fontWeight:"600"},children:"Invested"}),(0,a.jsxs)("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:0},children:["$",k.toFixed(2)]})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px auto",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:(0,a.jsx)("span",{style:{fontSize:"20px"},children:"\uD83D\uDCC8"})}),(0,a.jsx)("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:"0 0 6px 0",fontWeight:"600"},children:"Positions"}),(0,a.jsx)("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:0},children:T})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[(0,a.jsxs)("button",{onClick:()=>d(!0),style:{padding:"12px 20px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",border:"2px solid var(--border-warm)",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, var(--accent-warm) 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(245, 158, 11, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)"},children:[(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Export Data"]}),(0,a.jsxs)("button",{onClick:()=>l(!0),style:{padding:"12px 20px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",border:"2px solid #dc2626",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.2)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},children:[(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Delete Account"]})]})]}),s&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",border:"2px solid var(--border-warm)",borderRadius:"16px",padding:"32px",maxWidth:"520px",width:"100%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(245, 158, 11, 0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[(0,a.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"20px",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:(0,a.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:"0 0 4px 0",letterSpacing:"-0.5px"},children:"Export Your Data"}),(0,a.jsx)("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:"Download your portfolio data"})]})]}),(0,a.jsxs)("div",{style:{background:"var(--warm-bg)",border:"1px solid var(--border-warm)",borderRadius:"12px",padding:"20px",marginBottom:"24px"},children:[(0,a.jsx)("p",{style:{color:"var(--text)",lineHeight:"1.6",margin:"0 0 16px 0",fontSize:"15px",fontWeight:"500"},children:"Choose how you'd like to export your data:"}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"12px",borderRadius:"8px",background:"json"===u?"rgba(245, 158, 11, 0.1)":"transparent",border:"json"===u?"2px solid var(--accent-warm)":"2px solid transparent",transition:"all 0.2s ease"},children:[(0,a.jsx)("input",{type:"radio",name:"exportFormat",value:"json",checked:"json"===u,onChange:e=>h(e.target.value),style:{accentColor:"var(--accent-warm)",transform:"scale(1.2)"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)",marginBottom:"4px"},children:"\uD83D\uDCC4 Complete Backup (JSON)"}),(0,a.jsx)("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"All your data including trades, positions, and settings"})]})]}),(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"12px",borderRadius:"8px",background:"csv"===u?"rgba(245, 158, 11, 0.1)":"transparent",border:"csv"===u?"2px solid var(--accent-warm)":"2px solid transparent",transition:"all 0.2s ease"},children:[(0,a.jsx)("input",{type:"radio",name:"exportFormat",value:"csv",checked:"csv"===u,onChange:e=>h(e.target.value),style:{accentColor:"var(--accent-warm)",transform:"scale(1.2)"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)",marginBottom:"4px"},children:"\uD83D\uDCCA Trades Only (CSV)"}),(0,a.jsx)("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Just your trades for importing into other tools"})]})]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end",paddingTop:"8px"},children:[(0,a.jsx)("button",{onClick:()=>d(!1),disabled:x,style:{padding:"14px 28px",background:"transparent",border:"2px solid var(--border)",color:"var(--text-secondary)",borderRadius:"12px",fontSize:"15px",fontWeight:"600",cursor:x?"not-allowed":"pointer",opacity:x?.5:1,transition:"all 0.2s ease",minWidth:"100px"},onMouseEnter:e=>{x||(e.currentTarget.style.borderColor="var(--accent-warm)",e.currentTarget.style.color="var(--accent-warm)")},onMouseLeave:e=>{x||(e.currentTarget.style.borderColor="var(--border)",e.currentTarget.style.color="var(--text-secondary)")},children:"Cancel"}),(0,a.jsx)("button",{onClick:j,disabled:x,style:{padding:"14px 28px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",border:"2px solid var(--border-warm)",color:"white",borderRadius:"12px",fontSize:"15px",fontWeight:"600",cursor:x?"not-allowed":"pointer",opacity:x?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"10px",minWidth:"140px",justifyContent:"center",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},onMouseEnter:e=>{x||(e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, var(--accent-warm) 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(245, 158, 11, 0.4)")},onMouseLeave:e=>{x||(e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)")},children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"spin 1s linear infinite"}})}),"Exporting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:(0,a.jsx)("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Export Data"]})})]})]})}),(0,a.jsx)(m,{isOpen:o,title:"Delete Account",message:"This action will permanently delete your account and all associated data (".concat(z," trades, ").concat(T," positions, $").concat(k.toFixed(2)," invested). This cannot be undone."),confirmText:"Delete Account",cancelText:"Cancel",type:"delete",onConfirm:b,onCancel:()=>l(!1),isLoading:c})]})}var f=r(2530);function b(){var e,t,r;let[i,o]=(0,n.useState)(null),[l,s]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s(!0);let e=async()=>{try{let e=await fetch("/api/health-price"),t=await e.json();e.ok?o(t):o({overallStatus:"Unhealthy",message:"RAG assessment failed",sources:[],timestamp:new Date().toISOString(),responseTime:0,ragAssessment:{fresh:0,fallback:0,unhealthy:0}})}catch(e){o({overallStatus:"Unhealthy",message:"RAG system unavailable",sources:[],timestamp:new Date().toISOString(),responseTime:0,ragAssessment:{fresh:0,fallback:0,unhealthy:0}})}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]);let d=e=>{switch(e){case"Fresh":return"#10b981";case"Fallback":return"#f59e0b";case"Unhealthy":return"#ef4444";default:return"#6b7280"}},c=e=>{switch(e){case"Fresh":return"\uD83D\uDFE2";case"Fallback":return"\uD83D\uDFE1";case"Unhealthy":return"\uD83D\uDD34";default:return"⚪"}};return l?i?(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--text)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,a.jsx)("span",{style:{fontSize:"14px"},children:c(i.overallStatus)}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("div",{style:{fontWeight:"500",color:d(i.overallStatus),marginBottom:"2px"},children:i.message}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:"var(--muted)"},children:["Last checked: ",(null==i?void 0:i.timestamp)?new Date(i.timestamp).toLocaleTimeString():"Never"]})]})]}),(0,a.jsx)("div",{style:{marginTop:"8px"},children:(null==i?void 0:i.sources)&&i.sources.length>0?i.sources.map((e,t)=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px",padding:"4px 8px",background:"var(--surface)",borderRadius:"4px",border:"1px solid ".concat(d(e.status),"20")},children:[(0,a.jsx)("span",{style:{fontSize:"12px"},children:c(e.status)}),(0,a.jsxs)("div",{style:{flex:1,fontSize:"11px"},children:[(0,a.jsx)("div",{style:{fontWeight:"500",color:d(e.status)},children:e.name}),(0,a.jsxs)("div",{style:{fontSize:"10px",color:"var(--muted)"},children:[e.responseTime,"ms • ",e.dataQuality,"% quality"]})]})]},t)):(0,a.jsx)("div",{style:{fontSize:"11px",color:"var(--muted)",textAlign:"center",padding:"8px"},children:"No data sources available"})}),(0,a.jsxs)("div",{style:{marginTop:"8px",padding:"6px 8px",background:"var(--chrome)",borderRadius:"4px",fontSize:"10px",color:"var(--muted)",textAlign:"center"},children:["RAG: ",(null==i?void 0:null===(e=i.ragAssessment)||void 0===e?void 0:e.fresh)||0," Fresh • ",(null==i?void 0:null===(t=i.ragAssessment)||void 0===t?void 0:t.fallback)||0," Fallback • ",(null==i?void 0:null===(r=i.ragAssessment)||void 0===r?void 0:r.unhealthy)||0," Unhealthy"]})]}):(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"var(--text)"},children:[(0,a.jsx)("span",{style:{fontSize:"14px"},children:"⚪"}),(0,a.jsx)("div",{style:{flex:1},children:(0,a.jsx)("div",{style:{fontWeight:"500",color:"var(--muted)",marginBottom:"2px"},children:"Checking price pipeline status..."})})]}):(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"var(--text)"},children:[(0,a.jsx)("span",{style:{fontSize:"14px"},children:"⚪"}),(0,a.jsx)("div",{style:{flex:1},children:(0,a.jsx)("div",{style:{fontWeight:"500",color:"var(--muted)",marginBottom:"2px"},children:"RAG system initializing..."})})]})}var j=r(8483),w=r(7268),S=r(7429),k=r(4330),z=r(1586),T=r(8455);function C(){try{let e=(0,T.dz)(),t={device_category:e.category,viewport_width:e.width,viewport_height:e.height,has_touch:e.hasTouch,user_agent:navigator.userAgent,timestamp:Date.now()};window.gtag&&window.gtag("event","device_category_detected",{device_category:t.device_category,viewport_width:t.viewport_width,viewport_height:t.viewport_height,has_touch:t.has_touch})}catch(e){}}var D=r(5687);function P(){let{isAuthenticated:e,user:t,signInWithGoogle:r,logout:s}=(0,k.a)(),{trades:d,addTrade:c,deleteTrade:g,importTrades:u,migrateTrades:h,deleteAllTrades:v,totalInvested:m,totalTrades:P,totalPositions:W}=(0,z.K)(),[L,A]=(0,n.useState)({symbol:"",quantity:"",price:"",date:new Date().toISOString().split("T")[0],type:"buy",fees:""}),[I,B]=(0,n.useState)(!1),R=(0,n.useMemo)(()=>{let e=d.map(e=>e.ticker),t=["ADR","INC.","CORPORATION","COMPANY","CO.","LTD","LLC","INC","CORP"];return Array.from(new Set(e.filter(e=>{let r=e.trim().toUpperCase();return!t.includes(r)&&r.length>=2&&r.length<=10})))},[d]),M=(0,S.vR)(R),F=(0,S.Kg)(R.length>0?R:["AAPL","GOOGL","MSFT","TSLA","NVDA"],5),O=(0,S.$C)(),E=M.data,U=M.loading,N=M.error,V=M.refetch;(0,n.useEffect)(()=>{R.length>0&&V()},[R.length]);let _=F.data,q=F.loading,Y=F.error,H=O.data,G=O.loading,$=O.error,[Z,Q]=(0,n.useState)(!1),[J,K]=(0,n.useState)(!1),[X,ee]=(0,n.useState)(!1),[et,er]=(0,n.useState)("pie"),[ea,en]=(0,n.useState)(new Date);(0,T.dz)(),(0,n.useEffect)(()=>{let e;C(),window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{C()},250)})},[]),(0,n.useEffect)(()=>{let e=()=>{K(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{let e=setInterval(()=>{en(new Date)},1e3);return()=>clearInterval(e)},[]);let ei=d.filter(e=>!e.mock),eo=function(e){let t=[],r=[];return e.forEach(e=>{let a=function(e){let t=[],r=[];return e.ticker&&""!==e.ticker.trim()||t.push("Trade ".concat(e.id,": Missing ticker")),"number"!=typeof e.qty||isNaN(e.qty)?t.push("Trade ".concat(e.id," (").concat(e.ticker,"): Invalid quantity")):e.qty<=0&&t.push("Trade ".concat(e.id," (").concat(e.ticker,"): Quantity must be positive (").concat(e.qty,")")),"number"!=typeof e.price||isNaN(e.price)?t.push("Trade ".concat(e.id," (").concat(e.ticker,"): Invalid price")):e.price<=0&&t.push("Trade ".concat(e.id," (").concat(e.ticker,"): Price must be positive (").concat(e.price,")")),e.type&&("BUY"===e.type||"SELL"===e.type)||t.push("Trade ".concat(e.id," (").concat(e.ticker,"): Invalid type (").concat(e.type,")")),e.currency&&""!==e.currency.trim()||r.push("Trade ".concat(e.id," (").concat(e.ticker,"): Missing currency, defaulting to USD")),e.date&&""!==e.date.trim()||r.push("Trade ".concat(e.id," (").concat(e.ticker,"): Missing date")),{isValid:0===t.length,errors:t,warnings:r}}(e);t.push(...a.errors),r.push(...a.warnings)}),{isValid:0===t.length,errors:t,warnings:r}}(ei);eo.errors.length>0||eo.warnings.length>0?window.validationErrorsLogged||(eo.errors.length>0&&eo.errors.forEach(e=>console.error("  ",e)),eo.warnings.length>0&&eo.warnings.forEach(e=>console.warn("  ",e)),window.validationErrorsLogged=!0):ei.length>0&&!window.validationSuccessLogged&&(window.validationSuccessLogged=!0);let el=ei.reduce((e,t)=>{let{ticker:r,qty:a,price:n,type:i,date:o}=t;if(e[r]||(e[r]={ticker:r,shares:0,avgCost:0,currentPrice:0,currentValue:0,unrealizedPL:0,unrealizedPLPercent:0,totalTrades:0,lastTradeDate:o,isMock:!1,currency:t.currency||"USD"}),"BUY"===i){let t=e[r].shares*e[r].avgCost+a*n;e[r].shares+=a,e[r].avgCost=t/e[r].shares}else e[r].shares-=a;return e[r].totalTrades+=1,e[r].lastTradeDate=o,e[r].isMock=!1,e},{});Object.values(el).forEach(e=>{let t=null==E?void 0:E[e.ticker];t&&"object"==typeof t&&"price"in t&&t.price>0?("GBp"===t.currency?(e.currentPrice=t.price/100,e.currency="GBP"):(e.currentPrice=t.price,e.currency=t.currency),e.currentValue=e.currentPrice*e.shares,e.unrealizedPL=(e.currentPrice-e.avgCost)*e.shares,e.unrealizedPLPercent=e.avgCost>0?e.unrealizedPL/(e.avgCost*e.shares)*100:0):(e.currentPrice=0,e.currentValue=0,e.unrealizedPL=0,e.unrealizedPLPercent=0,e.shares)});let es=Object.values(el).reduce((e,t)=>"GBP"===t.currency?e+1.27*t.unrealizedPL:e+t.unrealizedPL,0),ed=m>0?es/m*100:0;Object.values(el).reduce((e,t)=>e+t.avgCost*t.shares*("GBP"===t.currency?1.27:1),0),n.useEffect(()=>{if(ei.length>0&&E&&Object.keys(E).length>0){let e="".concat(ei.length,"-").concat(m.toFixed(2),"-").concat(es.toFixed(2));window.lastLoggedPortfolioData&&window.lastLoggedPortfolioData===e||(window.lastLoggedPortfolioData=e)}},[ei.length,m,es,ed,W,P,el,E]);let ec=async()=>{if(!L.symbol||!L.quantity||!L.price){alert("Please fill in all required fields");return}let e={ticker:L.symbol.toUpperCase(),qty:parseFloat(L.quantity),price:parseFloat(L.price),date:L.date,type:"buy"===L.type?"BUY":"SELL",currency:"USD",mock:I};try{await c(e),A({symbol:"",quantity:"",price:"",date:new Date().toISOString().split("T")[0],type:"buy",fees:""})}catch(e){alert("Failed to add trade. Please try again.")}},ep=async e=>{try{await g(e)}catch(e){}},ex=async e=>{try{await u(e)}catch(e){alert("Failed to import trades. Please try again.")}},eg=async()=>{if(!e||!t){alert("You must be signed in to clear trades.");return}if(window.confirm("Are you sure you want to delete ALL trades from your account? This action cannot be undone."))try{let e=await v();alert("Successfully deleted ".concat(e," trade(s) from your account."))}catch(e){alert("Failed to clear trades. Please try again.")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{title:"Portfolio Dashboard - Track Your Investments",description:"Manage your investment portfolio with live P/L tracking, real-time prices, mock trading, and CSV import. Free portfolio management dashboard with advanced analytics and insights.",keywords:["portfolio dashboard","investment tracking","stock portfolio","crypto portfolio","portfolio management","investment analytics","trading dashboard","financial dashboard","portfolio tracker","investment tools"],canonical:"https://pocketportfolio.app/dashboard",ogImage:"/brand/preview-dashboard.svg",ogType:"website"}),(0,a.jsx)(w.ZP,{type:"WebApplication",data:w.zU}),(0,a.jsx)(D.Z,{title:"Dashboard"}),(0,a.jsxs)("div",{className:"mobile-container main-content",style:{minHeight:"100vh",background:"var(--bg)",color:"var(--text)",fontFamily:"system-ui, -apple-system, sans-serif",maxWidth:"100vw",overflowX:"hidden",boxSizing:"border-box",paddingBottom:"calc(var(--touch-target-large) + var(--safe-area-bottom))"},children:[(0,a.jsxs)("main",{className:"mobile-container",style:{padding:"16px 12px",maxWidth:"100%",boxSizing:"border-box",paddingTop:"16px"},children:[(0,a.jsxs)("div",{className:"mobile-card brand-card brand-candlestick brand-grid",style:{marginBottom:"12px",display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"12px",alignItems:"center",width:"100%",boxSizing:"border-box",padding:"16px",background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",borderRadius:"12px",border:"2px solid var(--border-warm)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",fontWeight:"500"},children:"Total Invested"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:["$",d.length>0?m.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",fontWeight:"500"},children:"Trades"}),(0,a.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:d.length>0?P:"0"})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--muted)",fontWeight:"500"},children:"Positions"}),(0,a.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:d.length>0?W:"0"})]})]}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-grid",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Price Pipeline Health"}),(0,a.jsx)(b,{})]}),d.length>0&&(0,a.jsxs)("div",{className:"mobile-card brand-card brand-sparkline brand-spine",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:"Unrealized P&L"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:es>=0?"var(--signal)":"var(--danger)"},children:["$",es.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:es>=0?"var(--signal)":"var(--danger)",fontWeight:"500"},children:[es>=0?"+":"",ed.toFixed(2),"%"]})]}),e&&t?(0,a.jsx)("div",{style:{marginBottom:"12px"},children:(0,a.jsx)(y,{user:t,trades:d,onAccountDeleted:()=>{window.location.href="/"}})}):(0,a.jsx)("div",{style:{marginBottom:"12px",textAlign:"center"},children:(0,a.jsx)("p",{style:{fontSize:"14px",color:"var(--muted)",marginBottom:"8px"},children:"Sign in to save your portfolio data"})}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-candlestick brand-spine",style:{marginBottom:"12px",padding:"16px",background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",borderRadius:"12px",border:"2px solid var(--border-warm)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",position:"relative",overflow:"visible",zIndex:1},children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Add Trade"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"8px",marginBottom:"8px",position:"relative",zIndex:1e3},children:(0,a.jsx)(p,{onTickerSelect:e=>A({...L,symbol:e}),placeholder:"Symbol (e.g., AAPL)"})}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"8px"},children:[(0,a.jsxs)("select",{value:L.type,onChange:e=>A({...L,type:e.target.value}),style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"},children:[(0,a.jsx)("option",{value:"buy",children:"Buy"}),(0,a.jsx)("option",{value:"sell",children:"Sell"})]}),(0,a.jsx)("input",{type:"number",placeholder:"Quantity",value:L.quantity,onChange:e=>A({...L,quantity:e.target.value}),style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"}})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"8px"},children:[(0,a.jsx)("input",{type:"number",step:"0.01",placeholder:"Price",value:L.price,onChange:e=>A({...L,price:e.target.value}),style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"}}),(0,a.jsx)("input",{type:"date",value:L.date,onChange:e=>A({...L,date:e.target.value}),style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"}})]}),(0,a.jsx)("div",{style:{marginBottom:"8px"},children:(0,a.jsx)("input",{type:"number",step:"0.01",placeholder:"Fees (optional)",value:L.fees,onChange:e=>A({...L,fees:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"}})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,a.jsx)("input",{type:"checkbox",id:"mock-trade",checked:I,onChange:e=>B(e.target.checked),style:{marginRight:"4px"}}),(0,a.jsx)("label",{htmlFor:"mock-trade",style:{fontSize:"12px",color:"var(--text)"},children:"Mock trade (for testing)"})]}),(0,a.jsxs)("button",{onClick:ec,style:{width:"100%",padding:"16px 24px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",color:"white",border:"2px solid var(--border-warm)",borderRadius:"12px",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 16px rgba(245, 158, 11, 0.3)",textTransform:"uppercase",letterSpacing:"0.5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, var(--accent-warm) 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(245, 158, 11, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(245, 158, 11, 0.3)"},children:[(0,a.jsx)("span",{style:{fontSize:"18px"},children:"➕"}),"Add Trade"]})]}),(0,a.jsx)("div",{className:"mobile-card brand-card brand-grid",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:(0,a.jsx)(x.Z,{onImport:ex})}),d.length>0&&(0,a.jsxs)("div",{className:"mobile-card brand-card brand-sparkline brand-spine",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:"pie"===et?"Portfolio Allocation":"Portfolio Performance"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,a.jsx)("button",{onClick:()=>er("pie"),style:{padding:"6px 12px",background:"pie"===et?"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)":"transparent",color:"pie"===et?"white":"var(--text)",border:"pie"===et?"2px solid var(--border-warm)":"1px solid var(--border)",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"pie"===et?"0 2px 8px rgba(245, 158, 11, 0.3)":"none"},children:"Pie"}),(0,a.jsx)("button",{onClick:()=>er("line"),style:{padding:"6px 12px",background:"line"===et?"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)":"transparent",color:"line"===et?"white":"var(--text)",border:"line"===et?"2px solid var(--border-warm)":"1px solid var(--border)",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"line"===et?"0 2px 8px rgba(245, 158, 11, 0.3)":"none"},children:"Line"})]})]}),"pie"===et?(0,a.jsx)(o,{positions:Object.values(el)}):(0,a.jsx)(l,{positions:Object.values(el),type:"line"})]}),d.length>0&&(0,a.jsxs)("div",{style:{marginTop:"32px",marginBottom:"32px"},children:[(0,a.jsx)("div",{style:{marginBottom:"32px"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:(0,a.jsx)("span",{style:{fontSize:"24px"},children:"\uD83D\uDCCA"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{style:{fontSize:"32px",fontWeight:"700",margin:"0 0 4px 0",color:"var(--text)"},children:"Portfolio Holdings"}),(0,a.jsx)("p",{style:{color:"var(--muted)",fontSize:"16px",margin:0},children:"Track your investment performance and holdings"})]})]}),e&&d.length>0&&(0,a.jsxs)("button",{onClick:eg,style:{padding:"6px 12px",background:"transparent",color:"var(--muted)",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:e=>{e.currentTarget.style.color="var(--danger)",e.currentTarget.style.borderColor="var(--danger)",e.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--muted)",e.currentTarget.style.borderColor="var(--border)",e.currentTarget.style.background="transparent"},title:"Permanently delete all trades from Firebase",children:[(0,a.jsx)("span",{children:"\uD83D\uDDD1️"}),"Clear All"]})]})}),(0,a.jsx)(f.Z,{positions:Object.values(el),onDeleteTrade:ep,onViewTrades:()=>{},trades:d,noCard:!0})]}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-grid",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:"Market News"}),(0,a.jsx)("button",{onClick:()=>{Object.keys(localStorage).forEach(e=>{e.startsWith("news_")&&localStorage.removeItem(e)}),window.location.reload()},style:{padding:"4px 8px",background:"var(--surface-elevated)",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"10px",color:"var(--muted)",cursor:"pointer"},children:"Refresh"})]}),q?(0,a.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"Loading news..."}):Y?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:"var(--danger)"},children:["Failed to load news: ",Y]}):_&&_.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.slice(0,X?_.length:3).map((e,t)=>(0,a.jsxs)("div",{style:{padding:"12px",background:"var(--bg)",borderRadius:"6px",border:"1px solid var(--border-subtle)",transition:"all 0.2s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.background="var(--surface-elevated)",e.currentTarget.style.borderColor="var(--brand)"},onMouseLeave:e=>{e.currentTarget.style.background="var(--bg)",e.currentTarget.style.borderColor="var(--border-subtle)"},onClick:()=>{e.url&&window.open(e.url,"_blank","noopener,noreferrer")},children:[(0,a.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"6px",color:"var(--text)",lineHeight:"1.4"},children:e.title}),(0,a.jsx)("div",{style:{fontSize:"11px",color:"var(--muted)",marginBottom:"6px",lineHeight:"1.3"},children:e.summary}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"10px",color:"var(--muted)"},children:[(0,a.jsx)("span",{children:e.publishedAt?new Date(e.publishedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"No date available"}),(0,a.jsx)("span",{style:{color:"var(--brand)",fontWeight:"500"},children:e.source||"Unknown source"})]})]},t))}),_.length>3&&(0,a.jsx)("button",{onClick:()=>ee(!X),style:{width:"100%",padding:"8px",background:"transparent",color:"var(--brand)",border:"1px solid var(--brand)",borderRadius:"4px",fontSize:"12px",cursor:"pointer",marginTop:"8px"},children:X?"Show Less":"Show All ".concat(_.length," Articles")})]}):(0,a.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"No news available"})]}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-sparkline",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Live Prices"}),U?(0,a.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"Loading prices..."}):N?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:"var(--danger)"},children:["Failed to load prices: ",N]}):E&&Object.keys(E).length>0?(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",padding:"8px",background:"var(--surface-elevated)",borderRadius:"4px",border:"1px solid var(--border-subtle)",fontSize:"11px",fontWeight:"600",color:"var(--muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[(0,a.jsx)("div",{children:"Symbol"}),(0,a.jsx)("div",{style:{textAlign:"right"},children:"Price"}),(0,a.jsx)("div",{style:{textAlign:"right"},children:"Change"})]}),Object.entries(E).slice(0,5).map((e,t)=>{var r;let[n,i]=e;return(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",padding:"8px",background:"var(--bg)",borderRadius:"4px",border:"1px solid var(--border-subtle)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-elevated)",onMouseLeave:e=>e.currentTarget.style.background="var(--bg)",children:[(0,a.jsxs)("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text)",display:"flex",alignItems:"center",gap:"4px"},children:[(0,a.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--signal)",animation:"pulse 2s infinite"}}),n]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--text)",textAlign:"right",fontWeight:"500"},children:[(null==i?void 0:i.currency)==="GBP"?"\xa3":(null==i?void 0:i.currency)==="GBp"?"\xa3":"$",(null==i?void 0:null===(r=i.price)||void 0===r?void 0:r.toFixed(2))||"N/A"]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:((null==i?void 0:i.change)||0)>=0?"var(--signal)":"var(--danger)",fontWeight:"600",textAlign:"right",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"2px"},children:[((null==i?void 0:i.change)||0)>=0?"↗":"↘",((null==i?void 0:i.change)||0)>=0?"+":"",((null==i?void 0:i.change)||0).toFixed(2),"%"]})]},t)}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"10px",color:"var(--muted)",marginTop:"4px"},children:[(0,a.jsx)("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"var(--signal)",animation:"pulse 1.5s infinite"}}),"Live data • Updates every 30s"]})]}):(0,a.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"No price data available"})]}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-candlestick",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Most Traded Stocks"}),G?(0,a.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"Loading market data..."}):$?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:"var(--danger)"},children:["Failed to load market data: ",$]}):H&&H.length>0?(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",padding:"8px",background:"var(--surface-elevated)",borderRadius:"4px",border:"1px solid var(--border-subtle)",fontSize:"11px",fontWeight:"600",color:"var(--muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[(0,a.jsx)("div",{children:"Symbol"}),(0,a.jsx)("div",{style:{textAlign:"right"},children:"Price"}),(0,a.jsx)("div",{style:{textAlign:"right"},children:"Change"})]}),H.slice(0,5).map((e,t)=>{var r,n;return(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",padding:"8px",background:"var(--bg)",borderRadius:"4px",border:"1px solid var(--border-subtle)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-elevated)",onMouseLeave:e=>e.currentTarget.style.background="var(--bg)",children:[(0,a.jsxs)("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text)",display:"flex",alignItems:"center",gap:"4px"},children:[(0,a.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--warning)",animation:"pulse 2s infinite"}}),e.symbol]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--text)",textAlign:"right",fontWeight:"500"},children:["GBP"===e.currency?"\xa3":"GBp"===e.currency?"\xa3":"$",(null===(r=e.price)||void 0===r?void 0:r.toFixed(2))||"N/A"]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:e.change>=0?"var(--signal)":"var(--danger)",fontWeight:"600",textAlign:"right",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"2px"},children:[e.change>=0?"↗":"↘",e.change>=0?"+":"",(null===(n=e.change)||void 0===n?void 0:n.toFixed(2))||"N/A","%"]})]},t)}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"10px",color:"var(--muted)",marginTop:"4px"},children:[(0,a.jsx)("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"var(--warning)",animation:"pulse 1.5s infinite"}}),"Market data • Updates every 30s"]})]}):(0,a.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"No market data available"})]}),e&&t&&(0,a.jsxs)("div",{className:"mobile-card brand-card brand-grid",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Settings"}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)"},children:["Signed in as: ",t.displayName||t.email]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)",marginTop:"4px"},children:["Portfolio: ",d.length," trades"]})]})]}),(0,a.jsx)("footer",{className:"mobile-container",style:{marginTop:"clamp(40px, 8vw, 80px)",paddingTop:"clamp(20px, 4vw, 32px)",borderTop:"1px solid var(--card-border)",textAlign:"center",background:"var(--chrome)",padding:"clamp(20px, 4vw, 32px) clamp(12px, 3vw, 24px)",width:"100%",maxWidth:"100vw",boxSizing:"border-box"},children:(0,a.jsxs)("div",{style:{maxWidth:"100%",margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[(0,a.jsx)("div",{style:{marginBottom:"clamp(20px, 4vw, 32px)"},children:(0,a.jsx)("p",{style:{color:"var(--muted)",fontSize:"14px",margin:0},children:"\xa9 2025 Pocket Portfolio — Built with the community."})}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginBottom:"32px",flexWrap:"wrap"},children:[(0,a.jsx)(i.default,{href:"/openbrokercsv",style:{padding:"12px 24px",border:"1px solid var(--card-border)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:"OpenBrokerCSV"}),(0,a.jsx)(i.default,{href:"/static/portfolio-tracker",style:{padding:"12px 24px",border:"1px solid var(--card-border)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:"Portfolio Tracker"}),(0,a.jsx)(i.default,{href:"/csv/etoro-to-openbrokercsv",style:{padding:"12px 24px",border:"1px solid var(--card-border)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:"eToro → OpenBrokerCSV"})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"24px",flexWrap:"wrap"},children:[(0,a.jsx)("a",{href:"https://github.com/pocketportfolio",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--text)",textDecoration:"none",fontSize:"14px",transition:"color 0.2s"},children:"GitHub"}),(0,a.jsx)("a",{href:"https://discord.gg/Ch9PpjRzwe",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--text)",textDecoration:"none",fontSize:"14px",transition:"color 0.2s"},children:"Discord"}),(0,a.jsx)(i.default,{href:"/landing",style:{color:"var(--text)",textDecoration:"none",fontSize:"14px",transition:"color 0.2s"},children:"About"})]})]})})]})]})}}},function(e){e.O(0,[358,139,972,726,244,958,687,586,626,226,971,117,744],function(){return e(e.s=1523)}),_N_E=e.O()}]);