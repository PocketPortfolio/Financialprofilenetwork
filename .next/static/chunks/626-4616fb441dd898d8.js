"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2530:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(7437),a=r(2265);function o(e){let{trades:t,positions:r,onDeleteTrade:o,onViewTrades:i,noCard:s=!1}=e,[c,l]=(0,a.useState)("positions"),[d,p]=(0,a.useState)(null),[u,x]=(0,a.useState)("value"),[g,h]=(0,a.useState)("desc"),f=(0,a.useMemo)(()=>d?t.filter(e=>e.ticker===d):t,[t,d]),y=(0,a.useMemo)(()=>[...r].sort((e,t)=>{let r,n;switch(u){case"ticker":return"asc"===g?e.ticker.localeCompare(t.ticker):t.ticker.localeCompare(e.ticker);case"value":r=e.currentValue,n=t.currentValue;break;case"pl":r=e.unrealizedPL,n=t.unrealizedPL;break;case"plPercent":r=e.unrealizedPLPercent,n=t.unrealizedPLPercent;break;default:return 0}return"asc"===g?r-n:n-r}),[r,u,g]),b=e=>{u===e?h("asc"===g?"desc":"asc"):(x(e),h("desc"))},m=e=>u!==e?"↕️":"asc"===g?"↑":"↓",v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return null==e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"GBp"===t?"GBP":t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},S=e=>null==e?"N/A":"".concat(e>=0?"+":"").concat(e.toFixed(2),"%");return(0,n.jsxs)("div",{className:s?"":"brand-card brand-grid brand-candlestick",style:s?{}:{background:"var(--card)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"24px",marginBottom:"32px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:0,background:"linear-gradient(135deg, var(--brand), #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Portfolio Overview"}),(0,n.jsx)("p",{style:{fontSize:"14px",color:"var(--muted)",margin:"4px 0 0 0"},children:"positions"===c?"".concat(r.length," positions • ").concat(t.length," total trades"):d?"".concat(f.length," trades for ").concat(d):"".concat(t.length," trades")})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{display:"flex",background:"var(--warm-bg)",borderRadius:"12px",padding:"6px",border:"2px solid var(--border-warm)"},children:[(0,n.jsx)("button",{onClick:()=>l("positions"),style:{padding:"12px 20px",background:"positions"===c?"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)":"transparent",color:"positions"===c?"white":"var(--text-warm)",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"positions"===c?"0 4px 12px rgba(245, 158, 11, 0.3)":"none"},onMouseEnter:e=>{"positions"!==c&&(e.currentTarget.style.background="rgba(245, 158, 11, 0.1)",e.currentTarget.style.color="var(--accent-warm)")},onMouseLeave:e=>{"positions"!==c&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-warm)")},children:"\uD83D\uDCCA Positions"}),(0,n.jsx)("button",{onClick:()=>l("trades"),style:{padding:"12px 20px",background:"trades"===c?"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)":"transparent",color:"trades"===c?"white":"var(--text-warm)",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"trades"===c?"0 4px 12px rgba(245, 158, 11, 0.3)":"none"},onMouseEnter:e=>{"trades"!==c&&(e.currentTarget.style.background="rgba(245, 158, 11, 0.1)",e.currentTarget.style.color="var(--accent-warm)")},onMouseLeave:e=>{"trades"!==c&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-warm)")},children:"\uD83D\uDCC8 Trades"})]}),"trades"===c&&d&&(0,n.jsx)("button",{onClick:()=>{p(null),l("positions")},style:{padding:"8px 16px",background:"var(--bg)",color:"var(--text)",border:"1px solid var(--card-border)",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"← Back to Positions"})]})]}),"positions"===c?(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{style:{background:"var(--bg)"},children:(0,n.jsxs)("tr",{children:[(0,n.jsxs)("th",{style:{padding:"16px",textAlign:"left",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer",userSelect:"none"},onClick:()=>b("ticker"),children:["\uD83D\uDCCA Asset ",m("ticker")]}),(0,n.jsxs)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer",userSelect:"none"},onClick:()=>b("value"),children:["\uD83D\uDCB0 Value ",m("value")]}),(0,n.jsxs)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer",userSelect:"none"},onClick:()=>b("pl"),children:["\uD83D\uDCC8 P/L ",m("pl")]}),(0,n.jsxs)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer",userSelect:"none"},onClick:()=>b("plPercent"),children:["\uD83D\uDCCA P/L % ",m("plPercent")]}),(0,n.jsx)("th",{style:{padding:"16px",textAlign:"center",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"⚙️ Actions"})]})}),(0,n.jsx)("tbody",{children:y.map(e=>{var t,r;return(0,n.jsxs)("tr",{style:{borderBottom:"1px solid var(--card-border)",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.background="var(--bg)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,n.jsxs)("td",{style:{padding:"16px",whiteSpace:"nowrap"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,n.jsx)("span",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:e.ticker}),e.isMock&&(0,n.jsx)("span",{style:{fontSize:"10px",color:"var(--brand)",background:"rgba(139, 92, 246, 0.1)",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:"MOCK"})]}),(0,n.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)",marginTop:"2px"},children:[e.shares," shares • Avg ","GBP"===e.currency?"\xa3":"GBp"===e.currency?"\xa3":"$",(null===(t=e.avgCost)||void 0===t?void 0:t.toFixed(2))||"N/A"," • ",e.totalTrades||0," trades"]})]}),(0,n.jsxs)("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap"},children:[(0,n.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:v(e.currentValue,e.currency)}),(0,n.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)"},children:["@ ","GBP"===e.currency?"\xa3":"GBp"===e.currency?"\xa3":"$",(null===(r=e.currentPrice)||void 0===r?void 0:r.toFixed(2))||"N/A"]})]}),(0,n.jsx)("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap"},children:(0,n.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:e.unrealizedPL>=0?"var(--pos)":"var(--neg)"},children:[e.unrealizedPL>=0?"+":"",v(e.unrealizedPL,e.currency)]})}),(0,n.jsx)("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap"},children:(0,n.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:e.unrealizedPL>=0?"var(--pos)":"var(--neg)"},children:S(e.unrealizedPLPercent)})}),(0,n.jsx)("td",{style:{padding:"16px",textAlign:"center"},children:(0,n.jsx)("button",{onClick:()=>{p(e.ticker),l("trades")},style:{padding:"8px 16px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",color:"white",border:"2px solid var(--border-warm)",borderRadius:"8px",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, var(--accent-warm) 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(245, 158, 11, 0.3)"},children:"\uD83D\uDCC8 View Trades"})})]},e.ticker)})})]})}):(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{style:{background:"var(--bg)"},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:"16px",textAlign:"left",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCC5 Date"}),(0,n.jsx)("th",{style:{padding:"16px",textAlign:"left",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCCA Ticker"}),(0,n.jsx)("th",{style:{padding:"16px",textAlign:"left",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDD04 Type"}),(0,n.jsx)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCE6 Qty"}),(0,n.jsx)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCB0 Price"}),(0,n.jsx)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCB5 Value"}),(0,n.jsx)("th",{style:{padding:"16px",textAlign:"center",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"✅ Status"}),(0,n.jsx)("th",{style:{padding:"16px",textAlign:"center",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"⚙️ Actions"})]})}),(0,n.jsx)("tbody",{children:f.map(e=>(0,n.jsxs)("tr",{style:{borderBottom:"1px solid var(--card-border)",opacity:e.mock?.7:1,background:e.mock?"var(--bg)":"transparent",transition:"background-color 0.2s ease"},onMouseEnter:t=>t.currentTarget.style.background=e.mock?"var(--card-border)":"var(--bg)",onMouseLeave:t=>t.currentTarget.style.background=e.mock?"var(--bg)":"transparent",children:[(0,n.jsx)("td",{style:{padding:"16px",whiteSpace:"nowrap",fontSize:"14px",color:"var(--text)"},children:e.date}),(0,n.jsx)("td",{style:{padding:"16px",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500",color:"var(--text)"},children:e.ticker}),(0,n.jsx)("td",{style:{padding:"16px",whiteSpace:"nowrap",fontSize:"14px",color:"var(--text)"},children:(0,n.jsx)("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:"BUY"===e.type?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:"BUY"===e.type?"var(--pos)":"var(--neg)"},children:e.type})}),(0,n.jsx)("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap",fontSize:"14px",color:"var(--text)"},children:e.qty}),(0,n.jsx)("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap",fontSize:"14px",color:"var(--text)"},children:v(e.price)}),(0,n.jsx)("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500",color:"var(--text)"},children:v(e.qty*e.price)}),(0,n.jsx)("td",{style:{padding:"16px",textAlign:"center",whiteSpace:"nowrap"},children:(0,n.jsx)("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:e.mock?"rgba(139, 92, 246, 0.1)":"rgba(34, 197, 94, 0.1)",color:e.mock?"var(--brand)":"var(--pos)"},children:e.mock?"Mock":"Real"})}),(0,n.jsx)("td",{style:{padding:"16px",textAlign:"center"},children:(0,n.jsx)("button",{onClick:()=>o(e.id),style:{padding:"8px 16px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"2px solid #dc2626",borderRadius:"8px",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(220, 38, 38, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #ef4444 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(220, 38, 38, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(220, 38, 38, 0.3)"},children:"\uD83D\uDDD1️ Delete"})})]},e.id))})]})}),("positions"===c&&0===r.length||"trades"===c&&0===f.length)&&(0,n.jsxs)("div",{style:{textAlign:"center",padding:"48px 24px",color:"var(--muted)"},children:[(0,n.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:(0,n.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",stroke:"var(--muted)",strokeWidth:"2"}),(0,n.jsx)("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",stroke:"var(--muted)",strokeWidth:"2"}),(0,n.jsx)("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1",stroke:"var(--muted)",strokeWidth:"2"}),(0,n.jsx)("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",stroke:"var(--muted)",strokeWidth:"2"})]})}),(0,n.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0",color:"var(--text)"},children:"positions"===c?"No positions yet":"No trades found"}),(0,n.jsx)("p",{style:{fontSize:"14px",margin:0},children:"positions"===c?"Add your first trade to see your portfolio positions":d?"No trades found for ".concat(d):"No trades available"})]})]})}},7429:function(e,t,r){r.d(t,{$C:function(){return i},Kg:function(){return o},vR:function(){return a}});var n=r(2265);function a(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let[t,r]=(0,n.useState)(null),[a,o]=(0,n.useState)(!1),[i,s]=(0,n.useState)(null),c=(0,n.useRef)(null),l=(0,n.useRef)(!0),d=(0,n.useRef)(0),p=(0,n.useMemo)(()=>(null==e?void 0:e.join(","))||"",[e]),u=(0,n.useCallback)(async()=>{if(!l.current)return;if(!e||0===e.length){r({}),o(!1),s(null);return}let t=Date.now(),n="quotes_".concat(p),a=localStorage.getItem(n);if(a&&t-d.current<6e5)try{let e=JSON.parse(a);if(l.current){r(e);return}}catch(e){}o(!0),s(null);try{let a=e.join(","),o=await fetch("/api/quote?symbols=".concat(a));if(!o.ok)throw Error("HTTP error! status: ".concat(o.status));let i=await o.json();if(l.current){let e={};i.forEach(t=>{e[t.symbol]=t}),r(e),localStorage.setItem(n,JSON.stringify(e)),d.current=t}}catch(e){l.current&&s(e instanceof Error?e.message:"Failed to fetch quotes")}finally{l.current&&o(!1)}},[p]);return(0,n.useEffect)(()=>(l.current=!0,u(),()=>{l.current=!1,c.current&&clearInterval(c.current)}),[p]),{data:t,loading:a,error:i,refetch:u}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,[r,a]=(0,n.useState)(null),[o,i]=(0,n.useState)(!1),[s,c]=(0,n.useState)(null),l=(0,n.useRef)(null),d=(0,n.useRef)(!0),p=(0,n.useRef)(0),u=(0,n.useMemo)(()=>e.join(","),[e]),x=(0,n.useCallback)(async()=>{if(!d.current)return;let r=Date.now(),n="news_".concat(u,"_").concat(t),o=localStorage.getItem(n);if(o&&r-p.current<9e5)try{let e=JSON.parse(o);if(d.current){a(e);return}}catch(e){}i(!0),c(null);try{let o=new URLSearchParams;e.length>0&&o.append("tickers",u),o.append("limit",t.toString());let i=await fetch("/api/news?".concat(o));if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));let s=await i.json();d.current&&(a(s),localStorage.setItem(n,JSON.stringify(s)),p.current=r)}catch(e){d.current&&c(e instanceof Error?e.message:"Failed to fetch news")}finally{d.current&&i(!1)}},[u,t]);return(0,n.useEffect)(()=>(d.current=!0,x(),()=>{d.current=!1,l.current&&clearInterval(l.current)}),[u,t]),{data:r,loading:o,error:s,refetch:x}}function i(){let[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!1),[o,i]=(0,n.useState)(null),s=(0,n.useRef)(null),c=(0,n.useRef)(!0),l=(0,n.useRef)(0),d=(0,n.useCallback)(async()=>{if(!c.current)return;let e=Date.now(),r="market_data_most_traded",n=localStorage.getItem(r);if(n&&e-l.current<9e5)try{let e=JSON.parse(n);if(c.current){t(e);return}}catch(e){}a(!0),i(null);try{let n=await fetch("/api/most-traded?count=10&region=US");if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let a=await n.json();c.current&&(t(a),localStorage.setItem(r,JSON.stringify(a)),l.current=e)}catch(e){c.current&&i(e instanceof Error?e.message:"Failed to fetch market data")}finally{c.current&&a(!1)}},[]);return(0,n.useEffect)(()=>(c.current=!0,d(),()=>{c.current=!1,s.current&&clearInterval(s.current)}),[]),{data:e,loading:r,error:o,refetch:d}}}}]);