"use strict";exports.id=11,exports.ids=[11],exports.modules={34583:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(10326),a=r(17577);function o({trades:e,positions:t,onDeleteTrade:r,onViewTrades:o,noCard:i=!1}){let[s,l]=(0,a.useState)("positions"),[c,d]=(0,a.useState)(null),[p,x]=(0,a.useState)("value"),[u,g]=(0,a.useState)("desc"),h=(0,a.useMemo)(()=>c?e.filter(e=>e.ticker===c):e,[e,c]),f=(0,a.useMemo)(()=>[...t].sort((e,t)=>{let r,n;switch(p){case"ticker":return"asc"===u?e.ticker.localeCompare(t.ticker):t.ticker.localeCompare(e.ticker);case"value":r=e.currentValue,n=t.currentValue;break;case"pl":r=e.unrealizedPL,n=t.unrealizedPL;break;case"plPercent":r=e.unrealizedPLPercent,n=t.unrealizedPLPercent;break;default:return 0}return"asc"===u?r-n:n-r}),[t,p,u]),y=e=>{p===e?g("asc"===u?"desc":"asc"):(x(e),g("desc"))},b=e=>p!==e?"↕️":"asc"===u?"↑":"↓",m=(e,t="USD")=>null==e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"GBp"===t?"GBP":t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),v=e=>null==e?"N/A":`${e>=0?"+":""}${e.toFixed(2)}%`;return(0,n.jsxs)("div",{className:i?"":"brand-card brand-grid brand-candlestick",style:i?{}:{background:"var(--card)",border:"1px solid var(--card-border)",borderRadius:"12px",padding:"24px",marginBottom:"32px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:0,background:"linear-gradient(135deg, var(--brand), #8b5cf6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Portfolio Overview"}),n.jsx("p",{style:{fontSize:"14px",color:"var(--muted)",margin:"4px 0 0 0"},children:"positions"===s?`${t.length} positions • ${e.length} total trades`:c?`${h.length} trades for ${c}`:`${e.length} trades`})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{display:"flex",background:"var(--warm-bg)",borderRadius:"12px",padding:"6px",border:"2px solid var(--border-warm)"},children:[n.jsx("button",{onClick:()=>l("positions"),style:{padding:"12px 20px",background:"positions"===s?"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)":"transparent",color:"positions"===s?"white":"var(--text-warm)",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"positions"===s?"0 4px 12px rgba(245, 158, 11, 0.3)":"none"},onMouseEnter:e=>{"positions"!==s&&(e.currentTarget.style.background="rgba(245, 158, 11, 0.1)",e.currentTarget.style.color="var(--accent-warm)")},onMouseLeave:e=>{"positions"!==s&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-warm)")},children:"\uD83D\uDCCA Positions"}),n.jsx("button",{onClick:()=>l("trades"),style:{padding:"12px 20px",background:"trades"===s?"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)":"transparent",color:"trades"===s?"white":"var(--text-warm)",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"trades"===s?"0 4px 12px rgba(245, 158, 11, 0.3)":"none"},onMouseEnter:e=>{"trades"!==s&&(e.currentTarget.style.background="rgba(245, 158, 11, 0.1)",e.currentTarget.style.color="var(--accent-warm)")},onMouseLeave:e=>{"trades"!==s&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text-warm)")},children:"\uD83D\uDCC8 Trades"})]}),"trades"===s&&c&&n.jsx("button",{onClick:()=>{d(null),l("positions")},style:{padding:"8px 16px",background:"var(--bg)",color:"var(--text)",border:"1px solid var(--card-border)",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"← Back to Positions"})]})]}),"positions"===s?n.jsx("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{style:{background:"var(--bg)"},children:(0,n.jsxs)("tr",{children:[(0,n.jsxs)("th",{style:{padding:"16px",textAlign:"left",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer",userSelect:"none"},onClick:()=>y("ticker"),children:["\uD83D\uDCCA Asset ",b("ticker")]}),(0,n.jsxs)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer",userSelect:"none"},onClick:()=>y("value"),children:["\uD83D\uDCB0 Value ",b("value")]}),(0,n.jsxs)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer",userSelect:"none"},onClick:()=>y("pl"),children:["\uD83D\uDCC8 P/L ",b("pl")]}),(0,n.jsxs)("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em",cursor:"pointer",userSelect:"none"},onClick:()=>y("plPercent"),children:["\uD83D\uDCCA P/L % ",b("plPercent")]}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"⚙️ Actions"})]})}),n.jsx("tbody",{children:f.map(e=>(0,n.jsxs)("tr",{style:{borderBottom:"1px solid var(--card-border)",transition:"background-color 0.2s ease"},onMouseEnter:e=>e.currentTarget.style.background="var(--bg)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,n.jsxs)("td",{style:{padding:"16px",whiteSpace:"nowrap"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:e.ticker}),e.isMock&&n.jsx("span",{style:{fontSize:"10px",color:"var(--brand)",background:"rgba(139, 92, 246, 0.1)",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:"MOCK"})]}),(0,n.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)",marginTop:"2px"},children:[e.shares," shares • Avg ","GBP"===e.currency?"\xa3":"GBp"===e.currency?"\xa3":"$",e.avgCost?.toFixed(2)||"N/A"," • ",e.totalTrades||0," trades"]})]}),(0,n.jsxs)("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap"},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:m(e.currentValue,e.currency)}),(0,n.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)"},children:["@ ","GBP"===e.currency?"\xa3":"GBp"===e.currency?"\xa3":"$",e.currentPrice?.toFixed(2)||"N/A"]})]}),n.jsx("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap"},children:(0,n.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:e.unrealizedPL>=0?"var(--pos)":"var(--neg)"},children:[e.unrealizedPL>=0?"+":"",m(e.unrealizedPL,e.currency)]})}),n.jsx("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap"},children:n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:e.unrealizedPL>=0?"var(--pos)":"var(--neg)"},children:v(e.unrealizedPLPercent)})}),n.jsx("td",{style:{padding:"16px",textAlign:"center"},children:n.jsx("button",{onClick:()=>{d(e.ticker),l("trades")},style:{padding:"8px 16px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",color:"white",border:"2px solid var(--border-warm)",borderRadius:"8px",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, var(--accent-warm) 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(245, 158, 11, 0.3)"},children:"\uD83D\uDCC8 View Trades"})})]},e.ticker))})]})}):n.jsx("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{style:{background:"var(--bg)"},children:(0,n.jsxs)("tr",{children:[n.jsx("th",{style:{padding:"16px",textAlign:"left",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCC5 Date"}),n.jsx("th",{style:{padding:"16px",textAlign:"left",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCCA Ticker"}),n.jsx("th",{style:{padding:"16px",textAlign:"left",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDD04 Type"}),n.jsx("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCE6 Qty"}),n.jsx("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCB0 Price"}),n.jsx("th",{style:{padding:"16px",textAlign:"right",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"\uD83D\uDCB5 Value"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"✅ Status"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"13px",fontWeight:"700",color:"var(--text-warm)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"⚙️ Actions"})]})}),n.jsx("tbody",{children:h.map(e=>(0,n.jsxs)("tr",{style:{borderBottom:"1px solid var(--card-border)",opacity:e.mock?.7:1,background:e.mock?"var(--bg)":"transparent",transition:"background-color 0.2s ease"},onMouseEnter:t=>t.currentTarget.style.background=e.mock?"var(--card-border)":"var(--bg)",onMouseLeave:t=>t.currentTarget.style.background=e.mock?"var(--bg)":"transparent",children:[n.jsx("td",{style:{padding:"16px",whiteSpace:"nowrap",fontSize:"14px",color:"var(--text)"},children:e.date}),n.jsx("td",{style:{padding:"16px",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500",color:"var(--text)"},children:e.ticker}),n.jsx("td",{style:{padding:"16px",whiteSpace:"nowrap",fontSize:"14px",color:"var(--text)"},children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:"BUY"===e.type?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:"BUY"===e.type?"var(--pos)":"var(--neg)"},children:e.type})}),n.jsx("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap",fontSize:"14px",color:"var(--text)"},children:e.qty}),n.jsx("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap",fontSize:"14px",color:"var(--text)"},children:m(e.price)}),n.jsx("td",{style:{padding:"16px",textAlign:"right",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500",color:"var(--text)"},children:m(e.qty*e.price)}),n.jsx("td",{style:{padding:"16px",textAlign:"center",whiteSpace:"nowrap"},children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:e.mock?"rgba(139, 92, 246, 0.1)":"rgba(34, 197, 94, 0.1)",color:e.mock?"var(--brand)":"var(--pos)"},children:e.mock?"Mock":"Real"})}),n.jsx("td",{style:{padding:"16px",textAlign:"center"},children:n.jsx("button",{onClick:()=>r(e.id),style:{padding:"8px 16px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"2px solid #dc2626",borderRadius:"8px",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(220, 38, 38, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #ef4444 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(220, 38, 38, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(220, 38, 38, 0.3)"},children:"\uD83D\uDDD1️ Delete"})})]},e.id))})]})}),("positions"===s&&0===t.length||"trades"===s&&0===h.length)&&(0,n.jsxs)("div",{style:{textAlign:"center",padding:"48px 24px",color:"var(--muted)"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:(0,n.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",stroke:"var(--muted)",strokeWidth:"2"}),n.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",stroke:"var(--muted)",strokeWidth:"2"}),n.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1",stroke:"var(--muted)",strokeWidth:"2"}),n.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",stroke:"var(--muted)",strokeWidth:"2"})]})}),n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0",color:"var(--text)"},children:"positions"===s?"No positions yet":"No trades found"}),n.jsx("p",{style:{fontSize:"14px",margin:0},children:"positions"===s?"Add your first trade to see your portfolio positions":c?`No trades found for ${c}`:"No trades available"})]})]})}},87433:(e,t,r)=>{r.d(t,{$C:()=>i,Kg:()=>o,vR:()=>a});var n=r(17577);function a(e,t=12e4){let[r,a]=(0,n.useState)(null),[o,i]=(0,n.useState)(!1),[s,l]=(0,n.useState)(null);(0,n.useRef)(null);let c=(0,n.useRef)(!0),d=(0,n.useRef)(0),p=(0,n.useMemo)(()=>e?.join(",")||"",[e]);return{data:r,loading:o,error:s,refetch:(0,n.useCallback)(async()=>{if(!c.current)return;if(!e||0===e.length){a({}),i(!1),l(null);return}let t=Date.now(),r=`quotes_${p}`,n=localStorage.getItem(r);if(n&&t-d.current<6e5)try{let e=JSON.parse(n);if(c.current){a(e);return}}catch(e){}i(!0),l(null);try{let n=e.join(","),o=await fetch(`/api/quote?symbols=${n}`);if(!o.ok)throw Error(`HTTP error! status: ${o.status}`);let i=await o.json();if(c.current){let e={};i.forEach(t=>{e[t.symbol]=t}),a(e),localStorage.setItem(r,JSON.stringify(e)),d.current=t}}catch(e){c.current&&l(e instanceof Error?e.message:"Failed to fetch quotes")}finally{c.current&&i(!1)}},[p])}}function o(e=[],t=5){let[r,a]=(0,n.useState)(null),[o,i]=(0,n.useState)(!1),[s,l]=(0,n.useState)(null);(0,n.useRef)(null);let c=(0,n.useRef)(!0),d=(0,n.useRef)(0),p=(0,n.useMemo)(()=>e.join(","),[e]);return{data:r,loading:o,error:s,refetch:(0,n.useCallback)(async()=>{if(!c.current)return;let r=Date.now(),n=`news_${p}_${t}`,o=localStorage.getItem(n);if(o&&r-d.current<9e5)try{let e=JSON.parse(o);if(c.current){a(e);return}}catch(e){}i(!0),l(null);try{let o=new URLSearchParams;e.length>0&&o.append("tickers",p),o.append("limit",t.toString());let i=await fetch(`/api/news?${o}`);if(!i.ok)throw Error(`HTTP error! status: ${i.status}`);let s=await i.json();c.current&&(a(s),localStorage.setItem(n,JSON.stringify(s)),d.current=r)}catch(e){c.current&&l(e instanceof Error?e.message:"Failed to fetch news")}finally{c.current&&i(!1)}},[p,t])}}function i(){let[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!1),[o,i]=(0,n.useState)(null);(0,n.useRef)(null);let s=(0,n.useRef)(!0),l=(0,n.useRef)(0);return{data:e,loading:r,error:o,refetch:(0,n.useCallback)(async()=>{if(!s.current)return;let e=Date.now(),r="market_data_most_traded",n=localStorage.getItem(r);if(n&&e-l.current<9e5)try{let e=JSON.parse(n);if(s.current){t(e);return}}catch(e){}a(!0),i(null);try{let n=await fetch("/api/most-traded?count=10&region=US");if(!n.ok)throw Error(`HTTP error! status: ${n.status}`);let a=await n.json();s.current&&(t(a),localStorage.setItem(r,JSON.stringify(a)),l.current=e)}catch(e){s.current&&i(e instanceof Error?e.message:"Failed to fetch market data")}finally{s.current&&a(!1)}},[])}}}};