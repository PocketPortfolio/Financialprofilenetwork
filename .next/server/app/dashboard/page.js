(()=>{var e={};e.id=702,e.ids=[702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},40745:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>g,tree:()=>d}),r(69521),r(46807),r(35866);var a=r(23191),i=r(88716),n=r(37922),o=r.n(n),s=r(95231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,69521)),"C:\\Users\\fitne\\OneDrive\\pocket-portfolio-app\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,46807)),"C:\\Users\\fitne\\OneDrive\\pocket-portfolio-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\fitne\\OneDrive\\pocket-portfolio-app\\app\\dashboard\\page.tsx"],p="/dashboard/page",x={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},89042:(e,t,r)=>{Promise.resolve().then(r.bind(r,20406))},85423:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>i,zU:()=>n});var a=r(10326);function i({type:e,data:t}){return a.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify((()=>{let r={"@context":"https://schema.org","@type":e,...t};switch(e){case"Organization":return{...r,"@type":"Organization",name:"Pocket Portfolio",url:"https://pocketportfolio.app",logo:"https://pocketportfolio.app/brand/pp-wordmark.svg",description:"Open-source, community-led investing dashboard with live P/L, mock trades, prices, and insights.",sameAs:["https://github.com/pocketportfolio","https://discord.gg/Ch9PpjRzwe"],contactPoint:{"@type":"ContactPoint",contactType:"Customer Service",url:"https://pocketportfolio.app"}};case"WebSite":return{...r,"@type":"WebSite",name:"Pocket Portfolio",url:"https://pocketportfolio.app",description:"Open-source, community-led investing dashboard",potentialAction:{"@type":"SearchAction",target:"https://pocketportfolio.app/search?q={search_term_string}","query-input":"required name=search_term_string"}};case"WebApplication":return{...r,"@type":"WebApplication",name:"Pocket Portfolio",url:"https://pocketportfolio.app",applicationCategory:"FinanceApplication",operatingSystem:"Web Browser",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},featureList:["Portfolio Tracking","Live Price Updates","CSV Import","Mock Trading","News Integration","Privacy-First Design"]};case"Product":return{...r,"@type":"Product",name:"Pocket Portfolio",description:"Open-source, community-led investing dashboard",brand:{"@type":"Brand",name:"Pocket Portfolio"},offers:{"@type":"Offer",price:"0",priceCurrency:"USD",availability:"https://schema.org/InStock"}};case"Article":return{...r,"@type":"Article",headline:t.headline,description:t.description,author:{"@type":"Organization",name:"Pocket Portfolio Team"},publisher:{"@type":"Organization",name:"Pocket Portfolio",logo:{"@type":"ImageObject",url:"https://pocketportfolio.app/brand/pp-wordmark.svg"}},datePublished:t.datePublished||new Date().toISOString(),dateModified:t.dateModified||new Date().toISOString()};case"FAQPage":return{...r,"@type":"FAQPage",mainEntity:t.faqs?.map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}}))||[]};default:return r}})())}})}let n={name:"Pocket Portfolio",url:"https://pocketportfolio.app",applicationCategory:"FinanceApplication",operatingSystem:"Web Browser",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},featureList:["Portfolio Tracking","Live Price Updates","CSV Import","Mock Trading","News Integration","Privacy-First Design"]}},20406:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r(10326),i=r(17577),n=r(90434);function o({positions:e}){let t,r;let i=e.reduce((e,t)=>e+t.currentValue,0),n=e.filter(e=>e.shares>0&&e.currentValue>0);if(0===n.length)return a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",background:"var(--bg)",borderRadius:"8px",border:"1px solid var(--border)",color:"var(--muted)",fontSize:"14px"},children:"No positions to display"});let o=n.map(e=>({...e,value:e.currentValue,percentage:e.currentValue/i*100})).sort((e,t)=>t.value-e.value),s=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"];if(1===o.length){let e=o[0];return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",padding:"16px"},children:[a.jsx("div",{style:{position:"relative"},children:a.jsx("svg",{width:"200",height:"200",viewBox:"0 0 200 200",children:a.jsx("circle",{cx:"100",cy:"100",r:"80",fill:s[0],stroke:"white",strokeWidth:"4",style:{filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.1))"}})})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"var(--surface-elevated)",borderRadius:"8px",border:"1px solid var(--border-subtle)"},children:[a.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:s[0],flexShrink:0}}),(0,a.jsxs)("div",{children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:e.ticker}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)"},children:[e.percentage.toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"12px",background:"var(--surface-elevated)",borderRadius:"8px",border:"1px solid var(--border-subtle)"},children:[(0,a.jsxs)("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"12px",color:"var(--muted)",marginBottom:"2px"},children:"Total Value"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:["$",i.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"12px",color:"var(--muted)",marginBottom:"2px"},children:"Positions"}),a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:n.length})]})]})]})}let l=(e,t,r,a,i)=>{let n=d(a,i,r,t),o=d(a,i,r,e),s=t-e<=180?"0":"1";return["M",a,i,"L",n.x,n.y,"A",r,r,0,s,0,o.x,o.y,"Z"].join(" ")},d=(e,t,r,a)=>{let i=(a-90)*Math.PI/180;return{x:e+r*Math.cos(i),y:t+r*Math.sin(i)}};return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",padding:"16px"},children:[a.jsx("div",{style:{position:"relative"},children:(0,a.jsxs)("svg",{width:"200",height:"200",viewBox:"0 0 200 200",style:{filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.1))"},children:[a.jsx("g",{transform:"translate(2, 2)",children:(t=0,o.map((e,r)=>{let i=e.percentage/100*360,n=t+i,o=l(t,n,80,100,100);return t=n,a.jsx("path",{d:o,fill:"rgba(0,0,0,0.1)",stroke:"none"},`shadow-${e.ticker}`)}))}),a.jsx("g",{children:(r=0,o.map((e,t)=>{let i=e.percentage/100*360,n=r+i,o=l(r,n,80,100,100);return r=n,a.jsx("path",{d:o,fill:s[t%s.length],stroke:"white",strokeWidth:"2",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))",transition:"all 0.2s ease"}},e.ticker)}))})]})}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px",width:"100%",maxWidth:"400px"},children:o.slice(0,6).map((e,t)=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",background:"var(--surface-elevated)",borderRadius:"4px",border:"1px solid var(--border-subtle)"},children:[a.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:s[t%s.length],flexShrink:0}}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0},children:[a.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.ticker}),(0,a.jsxs)("span",{style:{fontSize:"10px",color:"var(--muted)"},children:[e.percentage.toFixed(1),"%"]})]})]},e.ticker))}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"12px",background:"var(--surface-elevated)",borderRadius:"8px",border:"1px solid var(--border-subtle)"},children:[(0,a.jsxs)("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"12px",color:"var(--muted)",marginBottom:"2px"},children:"Total Value"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:["$",i.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"12px",color:"var(--muted)",marginBottom:"2px"},children:"Positions"}),a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:n.length})]})]})]})}function s({positions:e,type:t}){return 0===e.length?a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"300px",color:"var(--muted)",fontSize:"16px"},children:"Portfolio visualization will appear here once you have trades."}):"pie"===t?a.jsx(l,{positions:e}):a.jsx(d,{positions:e})}function l({positions:e}){let t=e.reduce((e,t)=>e+t.currentValue,0),r=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"],i=0,n=e.map((e,a)=>{let n=e.currentValue/t*100,o=3.6*i,s=(i+n)*3.6;return i+=n,{pathData:`M 150 150 L ${150+120*Math.cos((o-90)*Math.PI/180)} ${150+120*Math.sin((o-90)*Math.PI/180)} A 120 120 0 ${n>50?1:0} 1 ${150+120*Math.cos((s-90)*Math.PI/180)} ${150+120*Math.sin((s-90)*Math.PI/180)} Z`,color:r[a%r.length],percentage:n.toFixed(1),ticker:e.ticker,value:e.currentValue,pl:e.unrealizedPL,plPercent:e.unrealizedPLPercent}});return(0,a.jsxs)("div",{className:"portfolio-allocation",style:{display:"flex",gap:"16px",alignItems:"flex-start",flexWrap:"wrap",maxWidth:"100%",overflow:"hidden"},children:[a.jsx("div",{className:"portfolio-chart",style:{flex:"0 0 auto",display:"flex",justifyContent:"center",minWidth:"180px",maxWidth:"200px"},children:a.jsx("svg",{width:"200",height:"200",viewBox:"0 0 300 300",style:{maxWidth:"100%",height:"auto"},children:n.map((e,t)=>a.jsx("path",{d:e.pathData,fill:e.color,stroke:"var(--bg)",strokeWidth:"3",style:{cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"}},e.ticker))})}),(0,a.jsxs)("div",{className:"portfolio-legend",style:{flex:"1",minWidth:"200px",maxWidth:"280px",overflow:"hidden"},children:[a.jsx("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"12px",color:"var(--text)",textAlign:"left"},children:"Portfolio Allocation"}),a.jsx("div",{className:"portfolio-items",style:{display:"flex",flexDirection:"column",gap:"8px"},children:n.map((e,t)=>(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",padding:"4px 0"},children:[a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:e.color,borderRadius:"4px",flexShrink:0}}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:0},children:[a.jsx("span",{style:{fontWeight:"600",color:"var(--text)",fontSize:"14px"},children:e.ticker}),(0,a.jsxs)("span",{style:{color:"var(--muted)",fontSize:"13px",fontWeight:"500"},children:[e.percentage,"%"]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",textAlign:"right"},children:[(0,a.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:["$",e.value.toFixed(2)]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:e.pl>=0?"var(--pos)":"var(--neg)",fontWeight:"500"},children:[e.pl>=0?"+":"","$",e.pl.toFixed(2)]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:e.pl>=0?"var(--pos)":"var(--neg)",fontWeight:"500"},children:["(",e.pl>=0?"+":"",e.plPercent.toFixed(2),"%)"]})]})]},e.ticker))})]})]})}function d({positions:e}){let t=[{date:"2025-01-01",value:5e3},{date:"2025-01-02",value:5100},{date:"2025-01-03",value:4950},{date:"2025-01-04",value:5200},{date:"2025-01-05",value:5300},{date:"2025-01-06",value:5250},{date:"2025-01-07",value:5492}],r=Math.max(...t.map(e=>e.value)),i=Math.min(...t.map(e=>e.value)),n=r-i,o=t.map((e,a)=>({x:40+a/(t.length-1)*520,y:40+(r-e.value)/n*120,...e})),s=o.map((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`).join(" ");return(0,a.jsxs)("div",{style:{width:"100%"},children:[a.jsx("h4",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"16px",color:"var(--text)"},children:"Portfolio Value Over Time"}),(0,a.jsxs)("svg",{width:600,height:200,viewBox:"0 0 600 200",children:[a.jsx("defs",{children:a.jsx("pattern",{id:"grid",width:"50",height:"20",patternUnits:"userSpaceOnUse",children:a.jsx("path",{d:"M 50 0 L 0 0 0 20",fill:"none",stroke:"var(--card-border)",strokeWidth:"0.5"})})}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),a.jsx("path",{d:s,fill:"none",stroke:"#ff6b35",strokeWidth:"3"}),o.map((e,t)=>a.jsx("circle",{cx:e.x,cy:e.y,r:"4",fill:"#ff6b35",stroke:"var(--bg)",strokeWidth:"2"},t)),(0,a.jsxs)("text",{x:40,y:40,fontSize:"12",fill:"var(--muted)",children:["$",r.toFixed(0)]}),(0,a.jsxs)("text",{x:40,y:160,fontSize:"12",fill:"var(--muted)",children:["$",i.toFixed(0)]}),a.jsx("text",{x:300,y:190,fontSize:"12",fill:"var(--muted)",textAnchor:"middle",children:"Time"})]}),a.jsx("div",{style:{marginTop:"16px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"16px"},children:e.map((e,t)=>(0,a.jsxs)("div",{style:{background:"var(--bg)",border:"1px solid var(--card-border)",borderRadius:"6px",padding:"12px",textAlign:"center"},children:[a.jsx("div",{style:{fontWeight:"500",color:"var(--text)"},children:e.ticker}),(0,a.jsxs)("div",{style:{fontSize:"14px",color:"var(--muted)"},children:["$",e.currentValue.toFixed(2)]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:e.unrealizedPL>=0?"var(--pos)":"var(--neg)"},children:[e.unrealizedPL>=0?"+":"","$",e.unrealizedPL.toFixed(2)]})]},e.ticker))})]})}function c({onTickerSelect:e,placeholder:t="Search stocks or crypto..."}){let[r,n]=(0,i.useState)(""),[o,s]=(0,i.useState)([]),[l,d]=(0,i.useState)(!1),[c,p]=(0,i.useState)(!1),x=(0,i.useRef)(null),g=(0,i.useRef)(null),u=t=>{n(t.symbol),d(!1),e(t.symbol)};return(0,a.jsxs)("div",{ref:x,style:{position:"relative",width:"100%",zIndex:9999,overflow:"visible"},children:[a.jsx("input",{ref:g,type:"text",value:r,onChange:e=>{let t=e.target.value;n(t),d(t.length>0)},onKeyDown:t=>{"Enter"===t.key&&r&&(e(r.toUpperCase()),d(!1))},onFocus:e=>{d(r.length>0),e.target.style.borderColor="var(--brand)"},placeholder:t,style:{width:"100%",padding:"8px",border:"1px solid var(--card-border)",borderRadius:"6px",background:"var(--bg)",color:"var(--text)",fontSize:"12px",fontWeight:"500",outline:"none",transition:"all 0.2s ease",boxSizing:"border-box"},onBlur:e=>e.target.style.borderColor="var(--card-border)"}),l&&(0,a.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"var(--card)",border:"2px solid var(--accent-warm)",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 8px 24px rgba(245, 158, 11, 0.3)",zIndex:9999999,maxHeight:"200px",overflow:"hidden",transform:"translateZ(0)"},children:[o.length>0&&(0,a.jsxs)("div",{style:{padding:"8px 12px",fontSize:"12px",color:"var(--muted)",background:"var(--surface)",borderBottom:"1px solid var(--card-border)"},children:["Found ",o.length," result",1!==o.length?"s":""]}),a.jsx("div",{style:{maxHeight:"180px",overflowY:"auto"},children:c?(0,a.jsxs)("div",{style:{padding:"16px",textAlign:"center",color:"var(--muted)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"14px"},children:[a.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid var(--muted)",borderTop:"2px solid var(--brand)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Searching..."]}):o.length>0?o.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>u(e),style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:"var(--text)",textAlign:"left",cursor:"pointer",borderBottom:t<o.length-1?"1px solid var(--card-border)":"none",transition:"all 0.2s ease",fontSize:"14px",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"0"},onMouseEnter:e=>{e.currentTarget.style.background="var(--warm-bg)",e.currentTarget.style.color="var(--text-warm)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--text)"},children:[(0,a.jsxs)("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:"600",fontSize:"16px",color:"var(--text)",marginBottom:"4px"},children:e.symbol}),a.jsx("div",{style:{fontSize:"14px",color:"var(--muted)",lineHeight:"1.4"},children:e.name})]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)",textAlign:"right",whiteSpace:"nowrap",marginLeft:"12px"},children:[e.type," • ",e.region]})]},t)):r.length>=2?(0,a.jsxs)("div",{style:{padding:"20px 16px",textAlign:"center",color:"var(--muted)",fontSize:"14px"},children:[a.jsx("div",{style:{marginBottom:"8px",fontSize:"16px"},children:"\uD83D\uDD0D"}),'No results found for "',r,'"']}):null})]})]})}var p=r(37347),x=r(76),g=r(46791),u=r(75114);class h{static async deleteUserData(e){try{let t=(0,x.qs)(u.db),r=(0,x.IO)((0,x.hJ)(u.db,"trades"),(0,x.ar)("uid","==",e));(await (0,x.PL)(r)).docs.forEach(e=>{t.delete(e.ref)}),await t.commit()}catch(e){throw e}}static async exportUserData(e){try{let t=(0,x.IO)((0,x.hJ)(u.db,"trades"),(0,x.ar)("uid","==",e)),r=(await (0,x.PL)(t)).docs.map(e=>({id:e.id,...e.data()}));r.sort((e,t)=>{let r=e.createdAt?.toDate?e.createdAt.toDate().getTime():0;return(t.createdAt?.toDate?t.createdAt.toDate().getTime():0)-r});let a=r.length,i=r.reduce((e,t)=>e+t.qty*t.price,0),n=new Set(r.map(e=>e.ticker)).size;return{trades:r,portfolios:[],watchlists:[],preferences:[],totalTrades:a,totalInvested:i,totalPositions:n,exportDate:new Date().toISOString(),userId:e}}catch(e){throw e}}static async deleteAccount(e){try{let t=e.uid;await this.deleteUserData(t),await (0,g.h8)(e)}catch(e){if(e?.code==="auth/requires-recent-login")throw Error("Please sign out and sign back in, then try deleting your account again. This is required for security.");throw e}}static downloadUserData(e,t){let r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download=t||`pocket-portfolio-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}static downloadTradesCSV(e,t){if(0===e.length)throw Error("No trades to export");let r=new Blob([["Date,Ticker,Type,Currency,Quantity,Price,Mock,Created At",...e.map(e=>[e.date,e.ticker,e.type,e.currency,e.qty,e.price,e.mock,e.createdAt?.toDate?.()?.toISOString()||new Date().toISOString()].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download=t||`pocket-portfolio-trades-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}}let v=({isOpen:e,title:t,message:r,confirmText:i,cancelText:n,type:o,onConfirm:s,onCancel:l,isLoading:d=!1})=>e?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",border:"2px solid var(--border-warm)",borderRadius:"16px",padding:"32px",maxWidth:"520px",width:"100%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(245, 158, 11, 0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[a.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"delete"===o?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"20px",boxShadow:"delete"===o?"0 4px 12px rgba(239, 68, 68, 0.3)":"0 4px 12px rgba(245, 158, 11, 0.3)"},children:"delete"===o?a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 9v3m0 3v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"var(--neg)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"var(--brand)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:"0 0 4px 0",letterSpacing:"-0.5px"},children:t})]}),a.jsx("p",{style:{color:"var(--text-secondary)",lineHeight:"1.6",marginBottom:"24px",fontSize:"15px",fontWeight:"500"},children:r}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end",alignItems:"center"},children:[a.jsx("button",{onClick:l,disabled:d,style:{padding:"14px 28px",background:"transparent",border:"2px solid var(--border-warm)",color:"var(--text-warm)",borderRadius:"12px",fontSize:"15px",fontWeight:"600",cursor:d?"not-allowed":"pointer",opacity:d?.5:1,transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.2)",minWidth:"100px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{d||(e.currentTarget.style.background="rgba(245, 158, 11, 0.1)",e.currentTarget.style.borderColor="var(--accent-warm)",e.currentTarget.style.color="var(--accent-warm)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)")},onMouseLeave:e=>{d||(e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="var(--border-warm)",e.currentTarget.style.color="var(--text-warm)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(245, 158, 11, 0.2)")},children:n}),(0,a.jsxs)("button",{onClick:s,disabled:d,style:{padding:"14px 28px",background:"delete"===o?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",border:"delete"===o?"2px solid #dc2626":"2px solid var(--border-warm)",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:d?"not-allowed":"pointer",opacity:d?.5:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"delete"===o?"0 4px 12px rgba(239, 68, 68, 0.3)":"0 4px 12px rgba(245, 158, 11, 0.3)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.2)",minWidth:"140px",height:"48px"},onMouseEnter:e=>{d||("delete"===o?(e.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.4)"):(e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(245, 158, 11, 0.4)"))},onMouseLeave:e=>{d||("delete"===o?(e.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"):(e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)"))},children:[d&&a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"spin 1s linear infinite"}})}),i]})]})]})}):null;function m({user:e,trades:t,onAccountDeleted:r}){let[n,o]=(0,i.useState)(!1),[s,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),[p,x]=(0,i.useState)(!1),[g,u]=(0,i.useState)("json"),[m,y]=(0,i.useState)(!1),f=async()=>{c(!0);try{await h.deleteAccount(e),o(!1),r?r():window.location.href="/"}catch(e){alert(e instanceof Error?e.message:"Failed to delete account. Please try again."),c(!1)}},b=async()=>{x(!0);try{let t=await h.exportUserData(e.uid);"json"===g?h.downloadUserData(t):h.downloadTradesCSV(t.trades),l(!1)}catch(e){alert("Failed to export data. Please try again.")}finally{x(!1)}},j=t?.filter(e=>!e.mock)||[],w=j.reduce((e,t)=>{let{ticker:r,qty:a,price:i,type:n}=t;if(e[r]||(e[r]={ticker:r,shares:0,avgCost:0,currency:t.currency||"USD"}),"BUY"===n){let t=e[r].shares*e[r].avgCost+a*i;e[r].shares+=a,e[r].avgCost=t/e[r].shares}else e[r].shares-=a;return e},{}),k=Object.values(w).reduce((e,t)=>e+t.avgCost*t.shares,0),S=j.length,z=Object.keys(w).length;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",border:"2px solid var(--border-warm)",borderRadius:"16px",padding:"28px",marginBottom:"24px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(245, 158, 11, 0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[a.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"20px",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:a.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:"0 0 6px 0",letterSpacing:"-0.5px"},children:"Account Management"}),a.jsx("p",{style:{fontSize:"16px",color:"var(--text-warm)",margin:0,fontWeight:"500"},children:e.displayName||e.email})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"20px",marginBottom:"28px",padding:"24px",background:"var(--warm-bg)",borderRadius:"12px",border:"1px solid var(--border-warm)"},children:[(0,a.jsxs)("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px auto",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:a.jsx("span",{style:{fontSize:"20px"},children:"\uD83D\uDCCA"})}),a.jsx("p",{style:{fontSize:"14px",color:"var(--text-warm)",margin:"0 0 6px 0",fontWeight:"600"},children:"Trades"}),a.jsx("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:0},children:S})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px auto",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:a.jsx("span",{style:{fontSize:"20px"},children:"\uD83D\uDCB0"})}),a.jsx("p",{style:{fontSize:"14px",color:"var(--text-warm)",margin:"0 0 6px 0",fontWeight:"600"},children:"Invested"}),(0,a.jsxs)("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:0},children:["$",k.toFixed(2)]})]}),(0,a.jsxs)("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px auto",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:a.jsx("span",{style:{fontSize:"20px"},children:"\uD83D\uDCC8"})}),a.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:"0 0 6px 0",fontWeight:"600"},children:"Positions"}),a.jsx("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:0},children:z})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[(0,a.jsxs)("button",{onClick:()=>l(!0),style:{padding:"12px 20px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",border:"2px solid var(--border-warm)",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, var(--accent-warm) 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(245, 158, 11, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)"},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Export Data"]}),(0,a.jsxs)("button",{onClick:()=>o(!0),style:{padding:"12px 20px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",border:"2px solid #dc2626",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.2)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Delete Account"]})]})]}),s&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",border:"2px solid var(--border-warm)",borderRadius:"16px",padding:"32px",maxWidth:"520px",width:"100%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(245, 158, 11, 0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[a.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"20px",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:a.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)",margin:"0 0 4px 0",letterSpacing:"-0.5px"},children:"Export Your Data"}),a.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)",margin:0},children:"Download your portfolio data"})]})]}),(0,a.jsxs)("div",{style:{background:"var(--warm-bg)",border:"1px solid var(--border-warm)",borderRadius:"12px",padding:"20px",marginBottom:"24px"},children:[a.jsx("p",{style:{color:"var(--text)",lineHeight:"1.6",margin:"0 0 16px 0",fontSize:"15px",fontWeight:"500"},children:"Choose how you'd like to export your data:"}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"12px",borderRadius:"8px",background:"json"===g?"rgba(245, 158, 11, 0.1)":"transparent",border:"json"===g?"2px solid var(--accent-warm)":"2px solid transparent",transition:"all 0.2s ease"},children:[a.jsx("input",{type:"radio",name:"exportFormat",value:"json",checked:"json"===g,onChange:e=>u(e.target.value),style:{accentColor:"var(--accent-warm)",transform:"scale(1.2)"}}),(0,a.jsxs)("div",{children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)",marginBottom:"4px"},children:"\uD83D\uDCC4 Complete Backup (JSON)"}),a.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"All your data including trades, positions, and settings"})]})]}),(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"12px",borderRadius:"8px",background:"csv"===g?"rgba(245, 158, 11, 0.1)":"transparent",border:"csv"===g?"2px solid var(--accent-warm)":"2px solid transparent",transition:"all 0.2s ease"},children:[a.jsx("input",{type:"radio",name:"exportFormat",value:"csv",checked:"csv"===g,onChange:e=>u(e.target.value),style:{accentColor:"var(--accent-warm)",transform:"scale(1.2)"}}),(0,a.jsxs)("div",{children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)",marginBottom:"4px"},children:"\uD83D\uDCCA Trades Only (CSV)"}),a.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Just your trades for importing into other tools"})]})]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",justifyContent:"flex-end",paddingTop:"8px"},children:[a.jsx("button",{onClick:()=>l(!1),disabled:p,style:{padding:"14px 28px",background:"transparent",border:"2px solid var(--border)",color:"var(--text-secondary)",borderRadius:"12px",fontSize:"15px",fontWeight:"600",cursor:p?"not-allowed":"pointer",opacity:p?.5:1,transition:"all 0.2s ease",minWidth:"100px"},onMouseEnter:e=>{p||(e.currentTarget.style.borderColor="var(--accent-warm)",e.currentTarget.style.color="var(--accent-warm)")},onMouseLeave:e=>{p||(e.currentTarget.style.borderColor="var(--border)",e.currentTarget.style.color="var(--text-secondary)")},children:"Cancel"}),a.jsx("button",{onClick:b,disabled:p,style:{padding:"14px 28px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",border:"2px solid var(--border-warm)",color:"white",borderRadius:"12px",fontSize:"15px",fontWeight:"600",cursor:p?"not-allowed":"pointer",opacity:p?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"10px",minWidth:"140px",justifyContent:"center",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},onMouseEnter:e=>{p||(e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, var(--accent-warm) 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(245, 158, 11, 0.4)")},onMouseLeave:e=>{p||(e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)")},children:p?(0,a.jsxs)(a.Fragment,{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"spin 1s linear infinite"}})}),"Exporting..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Export Data"]})})]})]})}),a.jsx(v,{isOpen:n,title:"Delete Account",message:`This action will permanently delete your account and all associated data (${S} trades, ${z} positions, $${k.toFixed(2)} invested). This cannot be undone.`,confirmText:"Delete Account",cancelText:"Cancel",type:"delete",onConfirm:f,onCancel:()=>o(!1),isLoading:d})]})}var y=r(34583);function f(){let[e,t]=(0,i.useState)(null),[r,n]=(0,i.useState)(!1),o=e=>{switch(e){case"Fresh":return"#10b981";case"Fallback":return"#f59e0b";case"Unhealthy":return"#ef4444";default:return"#6b7280"}},s=e=>{switch(e){case"Fresh":return"\uD83D\uDFE2";case"Fallback":return"\uD83D\uDFE1";case"Unhealthy":return"\uD83D\uDD34";default:return"⚪"}};return r?e?(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--text)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[a.jsx("span",{style:{fontSize:"14px"},children:s(e.overallStatus)}),(0,a.jsxs)("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:"500",color:o(e.overallStatus),marginBottom:"2px"},children:e.message}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:"var(--muted)"},children:["Last checked: ",e?.timestamp?new Date(e.timestamp).toLocaleTimeString():"Never"]})]})]}),a.jsx("div",{style:{marginTop:"8px"},children:e?.sources&&e.sources.length>0?e.sources.map((e,t)=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px",padding:"4px 8px",background:"var(--surface)",borderRadius:"4px",border:`1px solid ${o(e.status)}20`},children:[a.jsx("span",{style:{fontSize:"12px"},children:s(e.status)}),(0,a.jsxs)("div",{style:{flex:1,fontSize:"11px"},children:[a.jsx("div",{style:{fontWeight:"500",color:o(e.status)},children:e.name}),(0,a.jsxs)("div",{style:{fontSize:"10px",color:"var(--muted)"},children:[e.responseTime,"ms • ",e.dataQuality,"% quality"]})]})]},t)):a.jsx("div",{style:{fontSize:"11px",color:"var(--muted)",textAlign:"center",padding:"8px"},children:"No data sources available"})}),(0,a.jsxs)("div",{style:{marginTop:"8px",padding:"6px 8px",background:"var(--chrome)",borderRadius:"4px",fontSize:"10px",color:"var(--muted)",textAlign:"center"},children:["RAG: ",e?.ragAssessment?.fresh||0," Fresh • ",e?.ragAssessment?.fallback||0," Fallback • ",e?.ragAssessment?.unhealthy||0," Unhealthy"]})]}):(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"var(--text)"},children:[a.jsx("span",{style:{fontSize:"14px"},children:"⚪"}),a.jsx("div",{style:{flex:1},children:a.jsx("div",{style:{fontWeight:"500",color:"var(--muted)",marginBottom:"2px"},children:"Checking price pipeline status..."})})]}):(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"var(--text)"},children:[a.jsx("span",{style:{fontSize:"14px"},children:"⚪"}),a.jsx("div",{style:{flex:1},children:a.jsx("div",{style:{fontWeight:"500",color:"var(--muted)",marginBottom:"2px"},children:"RAG system initializing..."})})]})}var b=r(79179),j=r(85423),w=r(87433),k=r(27153),S=r(90262),z=r(91970);function C(){let{isAuthenticated:e,user:t,signInWithGoogle:r,logout:l}=(0,k.a)(),{trades:d,addTrade:x,deleteTrade:g,importTrades:u,migrateTrades:h,deleteAllTrades:v,totalInvested:C,totalTrades:T,totalPositions:P}=(0,S.K)(),[D,W]=(0,i.useState)({symbol:"",quantity:"",price:"",date:new Date().toISOString().split("T")[0],type:"buy",fees:""}),[B,A]=(0,i.useState)(!1),L=(0,i.useMemo)(()=>{let e=d.map(e=>e.ticker),t=["ADR","INC.","CORPORATION","COMPANY","CO.","LTD","LLC","INC","CORP"];return Array.from(new Set(e.filter(e=>{let r=e.trim().toUpperCase();return!t.includes(r)&&r.length>=2&&r.length<=10})))},[d]),I=(0,w.vR)(L),R=(0,w.Kg)(L.length>0?L:["AAPL","GOOGL","MSFT","TSLA","NVDA"],5),M=(0,w.$C)(),F=I.data,q=I.loading,O=I.error;I.refetch;let $=R.data,U=R.loading,N=R.error,E=M.data,V=M.loading,_=M.error,[Y,G]=(0,i.useState)(!1),[H,Z]=(0,i.useState)(!1),[Q,J]=(0,i.useState)(!1),[K,X]=(0,i.useState)("pie"),[ee,et]=(0,i.useState)(new Date),er=d.filter(e=>!e.mock),ea=function(e){let t=[],r=[];return e.forEach(e=>{let a=function(e){let t=[],r=[];return e.ticker&&""!==e.ticker.trim()||t.push(`Trade ${e.id}: Missing ticker`),"number"!=typeof e.qty||isNaN(e.qty)?t.push(`Trade ${e.id} (${e.ticker}): Invalid quantity`):e.qty<=0&&t.push(`Trade ${e.id} (${e.ticker}): Quantity must be positive (${e.qty})`),"number"!=typeof e.price||isNaN(e.price)?t.push(`Trade ${e.id} (${e.ticker}): Invalid price`):e.price<=0&&t.push(`Trade ${e.id} (${e.ticker}): Price must be positive (${e.price})`),e.type&&("BUY"===e.type||"SELL"===e.type)||t.push(`Trade ${e.id} (${e.ticker}): Invalid type (${e.type})`),e.currency&&""!==e.currency.trim()||r.push(`Trade ${e.id} (${e.ticker}): Missing currency, defaulting to USD`),e.date&&""!==e.date.trim()||r.push(`Trade ${e.id} (${e.ticker}): Missing date`),{isValid:0===t.length,errors:t,warnings:r}}(e);t.push(...a.errors),r.push(...a.warnings)}),{isValid:0===t.length,errors:t,warnings:r}}(er);ea.errors.length>0||ea.warnings.length>0?window.validationErrorsLogged||(ea.errors.length>0&&ea.errors.forEach(e=>console.error("  ",e)),ea.warnings.length>0&&ea.warnings.forEach(e=>console.warn("  ",e)),window.validationErrorsLogged=!0):er.length>0&&!window.validationSuccessLogged&&(window.validationSuccessLogged=!0);let ei=er.reduce((e,t)=>{let{ticker:r,qty:a,price:i,type:n,date:o}=t;if(e[r]||(e[r]={ticker:r,shares:0,avgCost:0,currentPrice:0,currentValue:0,unrealizedPL:0,unrealizedPLPercent:0,totalTrades:0,lastTradeDate:o,isMock:!1,currency:t.currency||"USD"}),"BUY"===n){let t=e[r].shares*e[r].avgCost+a*i;e[r].shares+=a,e[r].avgCost=t/e[r].shares}else e[r].shares-=a;return e[r].totalTrades+=1,e[r].lastTradeDate=o,e[r].isMock=!1,e},{});Object.values(ei).forEach(e=>{let t=F?.[e.ticker];t&&"object"==typeof t&&"price"in t&&t.price>0?("GBp"===t.currency?(e.currentPrice=t.price/100,e.currency="GBP"):(e.currentPrice=t.price,e.currency=t.currency),e.currentValue=e.currentPrice*e.shares,e.unrealizedPL=(e.currentPrice-e.avgCost)*e.shares,e.unrealizedPLPercent=e.avgCost>0?e.unrealizedPL/(e.avgCost*e.shares)*100:0):(e.currentPrice=0,e.currentValue=0,e.unrealizedPL=0,e.unrealizedPLPercent=0,e.shares)});let en=Object.values(ei).reduce((e,t)=>"GBP"===t.currency?e+1.27*t.unrealizedPL:e+t.unrealizedPL,0);Object.values(ei).reduce((e,t)=>e+t.avgCost*t.shares*("GBP"===t.currency?1.27:1),0);let eo=async()=>{if(!D.symbol||!D.quantity||!D.price){alert("Please fill in all required fields");return}let e={ticker:D.symbol.toUpperCase(),qty:parseFloat(D.quantity),price:parseFloat(D.price),date:D.date,type:"buy"===D.type?"BUY":"SELL",currency:"USD",mock:B};try{await x(e),W({symbol:"",quantity:"",price:"",date:new Date().toISOString().split("T")[0],type:"buy",fees:""})}catch(e){alert("Failed to add trade. Please try again.")}},es=async e=>{try{await g(e)}catch(e){}},el=async e=>{try{await u(e)}catch(e){alert("Failed to import trades. Please try again.")}},ed=async()=>{if(!e||!t){alert("You must be signed in to clear trades.");return}if(window.confirm("Are you sure you want to delete ALL trades from your account? This action cannot be undone."))try{let e=await v();alert(`Successfully deleted ${e} trade(s) from your account.`)}catch(e){alert("Failed to clear trades. Please try again.")}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(b.Z,{title:"Portfolio Dashboard - Track Your Investments",description:"Manage your investment portfolio with live P/L tracking, real-time prices, mock trading, and CSV import. Free portfolio management dashboard with advanced analytics and insights.",keywords:["portfolio dashboard","investment tracking","stock portfolio","crypto portfolio","portfolio management","investment analytics","trading dashboard","financial dashboard","portfolio tracker","investment tools"],canonical:"https://pocketportfolio.app/dashboard",ogImage:"/brand/preview-dashboard.svg",ogType:"website"}),a.jsx(j.ZP,{type:"WebApplication",data:j.zU}),a.jsx(z.Z,{title:"Dashboard"}),(0,a.jsxs)("div",{className:"mobile-container main-content",style:{minHeight:"100vh",background:"var(--bg)",color:"var(--text)",fontFamily:"system-ui, -apple-system, sans-serif",maxWidth:"100vw",overflowX:"hidden",boxSizing:"border-box",paddingBottom:"calc(var(--touch-target-large) + var(--safe-area-bottom))"},children:[(0,a.jsxs)("main",{className:"mobile-container",style:{padding:"16px 12px",maxWidth:"100%",boxSizing:"border-box",paddingTop:"16px"},children:[(0,a.jsxs)("div",{className:"mobile-card brand-card brand-candlestick brand-grid",style:{marginBottom:"12px",display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"12px",alignItems:"center",width:"100%",boxSizing:"border-box",padding:"16px",background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",borderRadius:"12px",border:"2px solid var(--border-warm)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"var(--muted)",fontWeight:"500"},children:"Total Invested"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:["$",d.length>0?C.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"var(--muted)",fontWeight:"500"},children:"Trades"}),a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:d.length>0?T:"0"})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"var(--muted)",fontWeight:"500"},children:"Positions"}),a.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text)"},children:d.length>0?P:"0"})]})]}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-grid",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Price Pipeline Health"}),a.jsx(f,{})]}),d.length>0&&(0,a.jsxs)("div",{className:"mobile-card brand-card brand-sparkline brand-spine",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:"Unrealized P&L"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:en>=0?"var(--signal)":"var(--danger)"},children:["$",en.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:en>=0?"var(--signal)":"var(--danger)",fontWeight:"500"},children:[en>=0?"+":"",(C>0?en/C*100:0).toFixed(2),"%"]})]}),e&&t?a.jsx("div",{style:{marginBottom:"12px"},children:a.jsx(m,{user:t,trades:d,onAccountDeleted:()=>{window.location.href="/"}})}):a.jsx("div",{style:{marginBottom:"12px",textAlign:"center"},children:a.jsx("p",{style:{fontSize:"14px",color:"var(--muted)",marginBottom:"8px"},children:"Sign in to save your portfolio data"})}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-candlestick brand-spine",style:{marginBottom:"12px",padding:"16px",background:"linear-gradient(135deg, var(--surface) 0%, var(--warm-bg) 100%)",borderRadius:"12px",border:"2px solid var(--border-warm)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",position:"relative",overflow:"visible",zIndex:1},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Add Trade"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"8px",marginBottom:"8px",position:"relative",zIndex:1e3},children:a.jsx(c,{onTickerSelect:e=>W({...D,symbol:e}),placeholder:"Symbol (e.g., AAPL)"})}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"8px"},children:[(0,a.jsxs)("select",{value:D.type,onChange:e=>W({...D,type:e.target.value}),style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"},children:[a.jsx("option",{value:"buy",children:"Buy"}),a.jsx("option",{value:"sell",children:"Sell"})]}),a.jsx("input",{type:"number",placeholder:"Quantity",value:D.quantity,onChange:e=>W({...D,quantity:e.target.value}),style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"}})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"8px"},children:[a.jsx("input",{type:"number",step:"0.01",placeholder:"Price",value:D.price,onChange:e=>W({...D,price:e.target.value}),style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"}}),a.jsx("input",{type:"date",value:D.date,onChange:e=>W({...D,date:e.target.value}),style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"}})]}),a.jsx("div",{style:{marginBottom:"8px"},children:a.jsx("input",{type:"number",step:"0.01",placeholder:"Fees (optional)",value:D.fees,onChange:e=>W({...D,fees:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--surface)",color:"var(--text)"}})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[a.jsx("input",{type:"checkbox",id:"mock-trade",checked:B,onChange:e=>A(e.target.checked),style:{marginRight:"4px"}}),a.jsx("label",{htmlFor:"mock-trade",style:{fontSize:"12px",color:"var(--text)"},children:"Mock trade (for testing)"})]}),(0,a.jsxs)("button",{onClick:eo,style:{width:"100%",padding:"16px 24px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",color:"white",border:"2px solid var(--border-warm)",borderRadius:"12px",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 16px rgba(245, 158, 11, 0.3)",textTransform:"uppercase",letterSpacing:"0.5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, var(--accent-warm) 100%)",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(245, 158, 11, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 16px rgba(245, 158, 11, 0.3)"},children:[a.jsx("span",{style:{fontSize:"18px"},children:"➕"}),"Add Trade"]})]}),a.jsx("div",{className:"mobile-card brand-card brand-grid",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:a.jsx(p.Z,{onImport:el})}),d.length>0&&(0,a.jsxs)("div",{className:"mobile-card brand-card brand-sparkline brand-spine",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:"pie"===K?"Portfolio Allocation":"Portfolio Performance"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[a.jsx("button",{onClick:()=>X("pie"),style:{padding:"6px 12px",background:"pie"===K?"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)":"transparent",color:"pie"===K?"white":"var(--text)",border:"pie"===K?"2px solid var(--border-warm)":"1px solid var(--border)",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"pie"===K?"0 2px 8px rgba(245, 158, 11, 0.3)":"none"},children:"Pie"}),a.jsx("button",{onClick:()=>X("line"),style:{padding:"6px 12px",background:"line"===K?"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)":"transparent",color:"line"===K?"white":"var(--text)",border:"line"===K?"2px solid var(--border-warm)":"1px solid var(--border)",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"line"===K?"0 2px 8px rgba(245, 158, 11, 0.3)":"none"},children:"Line"})]})]}),"pie"===K?a.jsx(o,{positions:Object.values(ei)}):a.jsx(s,{positions:Object.values(ei),type:"line"})]}),d.length>0&&(0,a.jsxs)("div",{style:{marginTop:"32px",marginBottom:"32px"},children:[a.jsx("div",{style:{marginBottom:"32px"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:a.jsx("span",{style:{fontSize:"24px"},children:"\uD83D\uDCCA"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",margin:"0 0 4px 0",color:"var(--text)"},children:"Portfolio Holdings"}),a.jsx("p",{style:{color:"var(--muted)",fontSize:"16px",margin:0},children:"Track your investment performance and holdings"})]})]}),e&&d.length>0&&(0,a.jsxs)("button",{onClick:ed,style:{padding:"6px 12px",background:"transparent",color:"var(--muted)",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"12px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:e=>{e.currentTarget.style.color="var(--danger)",e.currentTarget.style.borderColor="var(--danger)",e.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--muted)",e.currentTarget.style.borderColor="var(--border)",e.currentTarget.style.background="transparent"},title:"Permanently delete all trades from Firebase",children:[a.jsx("span",{children:"\uD83D\uDDD1️"}),"Clear All"]})]})}),a.jsx(y.Z,{positions:Object.values(ei),onDeleteTrade:es,onViewTrades:()=>{},trades:d,noCard:!0})]}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-grid",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text)"},children:"Market News"}),a.jsx("button",{onClick:()=>{Object.keys(localStorage).forEach(e=>{e.startsWith("news_")&&localStorage.removeItem(e)}),window.location.reload()},style:{padding:"4px 8px",background:"var(--surface-elevated)",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"10px",color:"var(--muted)",cursor:"pointer"},children:"Refresh"})]}),U?a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"Loading news..."}):N?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:"var(--danger)"},children:["Failed to load news: ",N]}):$&&$.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:$.slice(0,Q?$.length:3).map((e,t)=>(0,a.jsxs)("div",{style:{padding:"12px",background:"var(--bg)",borderRadius:"6px",border:"1px solid var(--border-subtle)",transition:"all 0.2s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.background="var(--surface-elevated)",e.currentTarget.style.borderColor="var(--brand)"},onMouseLeave:e=>{e.currentTarget.style.background="var(--bg)",e.currentTarget.style.borderColor="var(--border-subtle)"},onClick:()=>{e.url&&window.open(e.url,"_blank","noopener,noreferrer")},children:[a.jsx("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"6px",color:"var(--text)",lineHeight:"1.4"},children:e.title}),a.jsx("div",{style:{fontSize:"11px",color:"var(--muted)",marginBottom:"6px",lineHeight:"1.3"},children:e.summary}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"10px",color:"var(--muted)"},children:[a.jsx("span",{children:e.publishedAt?new Date(e.publishedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"No date available"}),a.jsx("span",{style:{color:"var(--brand)",fontWeight:"500"},children:e.source||"Unknown source"})]})]},t))}),$.length>3&&a.jsx("button",{onClick:()=>J(!Q),style:{width:"100%",padding:"8px",background:"transparent",color:"var(--brand)",border:"1px solid var(--brand)",borderRadius:"4px",fontSize:"12px",cursor:"pointer",marginTop:"8px"},children:Q?"Show Less":`Show All ${$.length} Articles`})]}):a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"No news available"})]}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-sparkline",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Live Prices"}),q?a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"Loading prices..."}):O?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:"var(--danger)"},children:["Failed to load prices: ",O]}):F&&Object.keys(F).length>0?(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",padding:"8px",background:"var(--surface-elevated)",borderRadius:"4px",border:"1px solid var(--border-subtle)",fontSize:"11px",fontWeight:"600",color:"var(--muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[a.jsx("div",{children:"Symbol"}),a.jsx("div",{style:{textAlign:"right"},children:"Price"}),a.jsx("div",{style:{textAlign:"right"},children:"Change"})]}),Object.entries(F).slice(0,5).map(([e,t],r)=>(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",padding:"8px",background:"var(--bg)",borderRadius:"4px",border:"1px solid var(--border-subtle)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-elevated)",onMouseLeave:e=>e.currentTarget.style.background="var(--bg)",children:[(0,a.jsxs)("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text)",display:"flex",alignItems:"center",gap:"4px"},children:[a.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--signal)",animation:"pulse 2s infinite"}}),e]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--text)",textAlign:"right",fontWeight:"500"},children:[t?.currency==="GBP"?"\xa3":t?.currency==="GBp"?"\xa3":"$",t?.price?.toFixed(2)||"N/A"]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:(t?.change||0)>=0?"var(--signal)":"var(--danger)",fontWeight:"600",textAlign:"right",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"2px"},children:[(t?.change||0)>=0?"↗":"↘",(t?.change||0)>=0?"+":"",(t?.change||0).toFixed(2),"%"]})]},r)),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"10px",color:"var(--muted)",marginTop:"4px"},children:[a.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"var(--signal)",animation:"pulse 1.5s infinite"}}),"Live data • Updates every 30s"]})]}):a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"No price data available"})]}),(0,a.jsxs)("div",{className:"mobile-card brand-card brand-candlestick",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Most Traded Stocks"}),V?a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"Loading market data..."}):_?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"20px",color:"var(--danger)"},children:["Failed to load market data: ",_]}):E&&E.length>0?(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",padding:"8px",background:"var(--surface-elevated)",borderRadius:"4px",border:"1px solid var(--border-subtle)",fontSize:"11px",fontWeight:"600",color:"var(--muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[a.jsx("div",{children:"Symbol"}),a.jsx("div",{style:{textAlign:"right"},children:"Price"}),a.jsx("div",{style:{textAlign:"right"},children:"Change"})]}),E.slice(0,5).map((e,t)=>(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",padding:"8px",background:"var(--bg)",borderRadius:"4px",border:"1px solid var(--border-subtle)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:e=>e.currentTarget.style.background="var(--surface-elevated)",onMouseLeave:e=>e.currentTarget.style.background="var(--bg)",children:[(0,a.jsxs)("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text)",display:"flex",alignItems:"center",gap:"4px"},children:[a.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--warning)",animation:"pulse 2s infinite"}}),e.symbol]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--text)",textAlign:"right",fontWeight:"500"},children:["GBP"===e.currency?"\xa3":"GBp"===e.currency?"\xa3":"$",e.price?.toFixed(2)||"N/A"]}),(0,a.jsxs)("div",{style:{fontSize:"11px",color:e.change>=0?"var(--signal)":"var(--danger)",fontWeight:"600",textAlign:"right",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"2px"},children:[e.change>=0?"↗":"↘",e.change>=0?"+":"",e.change?.toFixed(2)||"N/A","%"]})]},t)),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"10px",color:"var(--muted)",marginTop:"4px"},children:[a.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"var(--warning)",animation:"pulse 1.5s infinite"}}),"Market data • Updates every 30s"]})]}):a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:"No market data available"})]}),e&&t&&(0,a.jsxs)("div",{className:"mobile-card brand-card brand-grid",style:{marginBottom:"12px",padding:"12px",background:"var(--surface)",borderRadius:"8px",border:"1px solid var(--border)"},children:[a.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"var(--text)"},children:"Settings"}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)"},children:["Signed in as: ",t.displayName||t.email]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--muted)",marginTop:"4px"},children:["Portfolio: ",d.length," trades"]})]})]}),a.jsx("footer",{className:"mobile-container",style:{marginTop:"clamp(40px, 8vw, 80px)",paddingTop:"clamp(20px, 4vw, 32px)",borderTop:"1px solid var(--card-border)",textAlign:"center",background:"var(--chrome)",padding:"clamp(20px, 4vw, 32px) clamp(12px, 3vw, 24px)",width:"100%",maxWidth:"100vw",boxSizing:"border-box"},children:(0,a.jsxs)("div",{style:{maxWidth:"100%",margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[a.jsx("div",{style:{marginBottom:"clamp(20px, 4vw, 32px)"},children:a.jsx("p",{style:{color:"var(--muted)",fontSize:"14px",margin:0},children:"\xa9 2025 Pocket Portfolio — Built with the community."})}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginBottom:"32px",flexWrap:"wrap"},children:[a.jsx(n.default,{href:"/openbrokercsv",style:{padding:"12px 24px",border:"1px solid var(--card-border)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:"OpenBrokerCSV"}),a.jsx(n.default,{href:"/static/portfolio-tracker",style:{padding:"12px 24px",border:"1px solid var(--card-border)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:"Portfolio Tracker"}),a.jsx(n.default,{href:"/csv/etoro-to-openbrokercsv",style:{padding:"12px 24px",border:"1px solid var(--card-border)",borderRadius:"8px",color:"var(--text)",textDecoration:"none",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:"eToro → OpenBrokerCSV"})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"24px",flexWrap:"wrap"},children:[a.jsx("a",{href:"https://github.com/pocketportfolio",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--text)",textDecoration:"none",fontSize:"14px",transition:"color 0.2s"},children:"GitHub"}),a.jsx("a",{href:"https://discord.gg/Ch9PpjRzwe",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--text)",textDecoration:"none",fontSize:"14px",transition:"color 0.2s"},children:"Discord"}),a.jsx(n.default,{href:"/landing",style:{color:"var(--text)",textDecoration:"none",fontSize:"14px",transition:"color 0.2s"},children:"About"})]})]})})]})]})}},69521:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\fitne\OneDrive\pocket-portfolio-app\app\dashboard\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,629,404,285,216,263,845,970,262,11,347],()=>r(40745));module.exports=a})();