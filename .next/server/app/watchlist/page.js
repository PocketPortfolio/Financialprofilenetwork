(()=>{var e={};e.id=533,e.ids=[533],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},81860:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(35387),r(46807),r(35866);var s=r(23191),i=r(88716),o=r(37922),a=r.n(o),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c=["",{children:["watchlist",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,35387)),"C:\\Users\\fitne\\OneDrive\\pocket-portfolio-app\\app\\watchlist\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,46807)),"C:\\Users\\fitne\\OneDrive\\pocket-portfolio-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\fitne\\OneDrive\\pocket-portfolio-app\\app\\watchlist\\page.tsx"],u="/watchlist/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/watchlist/page",pathname:"/watchlist",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},99518:(e,t,r)=>{Promise.resolve().then(r.bind(r,37294))},87433:(e,t,r)=>{"use strict";r.d(t,{$C:()=>a,Kg:()=>o,vR:()=>i});var s=r(17577);function i(e,t=12e4){let[r,i]=(0,s.useState)(null),[o,a]=(0,s.useState)(!1),[n,l]=(0,s.useState)(null);(0,s.useRef)(null);let c=(0,s.useRef)(!0),d=(0,s.useRef)(0),u=(0,s.useMemo)(()=>e?.join(",")||"",[e]);return{data:r,loading:o,error:n,refetch:(0,s.useCallback)(async()=>{if(!c.current)return;if(!e||0===e.length){i({}),a(!1),l(null);return}let t=Date.now(),r=`quotes_${u}`,s=localStorage.getItem(r);if(s&&t-d.current<6e5)try{let e=JSON.parse(s);if(c.current){i(e);return}}catch(e){}a(!0),l(null);try{let s=e.join(","),o=await fetch(`/api/quote?symbols=${s}`);if(!o.ok)throw Error(`HTTP error! status: ${o.status}`);let a=await o.json();if(c.current){let e={};a.forEach(t=>{e[t.symbol]=t}),i(e),localStorage.setItem(r,JSON.stringify(e)),d.current=t}}catch(e){c.current&&l(e instanceof Error?e.message:"Failed to fetch quotes")}finally{c.current&&a(!1)}},[u])}}function o(e=[],t=5){let[r,i]=(0,s.useState)(null),[o,a]=(0,s.useState)(!1),[n,l]=(0,s.useState)(null);(0,s.useRef)(null);let c=(0,s.useRef)(!0),d=(0,s.useRef)(0),u=(0,s.useMemo)(()=>e.join(","),[e]);return{data:r,loading:o,error:n,refetch:(0,s.useCallback)(async()=>{if(!c.current)return;let r=Date.now(),s=`news_${u}_${t}`,o=localStorage.getItem(s);if(o&&r-d.current<9e5)try{let e=JSON.parse(o);if(c.current){i(e);return}}catch(e){}a(!0),l(null);try{let o=new URLSearchParams;e.length>0&&o.append("tickers",u),o.append("limit",t.toString());let a=await fetch(`/api/news?${o}`);if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let n=await a.json();c.current&&(i(n),localStorage.setItem(s,JSON.stringify(n)),d.current=r)}catch(e){c.current&&l(e instanceof Error?e.message:"Failed to fetch news")}finally{c.current&&a(!1)}},[u,t])}}function a(){let[e,t]=(0,s.useState)(null),[r,i]=(0,s.useState)(!1),[o,a]=(0,s.useState)(null);(0,s.useRef)(null);let n=(0,s.useRef)(!0),l=(0,s.useRef)(0);return{data:e,loading:r,error:o,refetch:(0,s.useCallback)(async()=>{if(!n.current)return;let e=Date.now(),r="market_data_most_traded",s=localStorage.getItem(r);if(s&&e-l.current<9e5)try{let e=JSON.parse(s);if(n.current){t(e);return}}catch(e){}i(!0),a(null);try{let s=await fetch("/api/most-traded?count=10&region=US");if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);let i=await s.json();n.current&&(t(i),localStorage.setItem(r,JSON.stringify(i)),l.current=e)}catch(e){n.current&&a(e instanceof Error?e.message:"Failed to fetch market data")}finally{n.current&&i(!1)}},[])}}},37294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(10326),i=r(17577),o=r(27153),a=r(76),n=r(75114);class l{static async getWatchlist(e){try{if(!n.db)throw Error("Firebase database not initialized");let t=(0,a.IO)((0,a.hJ)(n.db,"watchlist"),(0,a.ar)("uid","==",e));return(await (0,a.PL)(t)).docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{let r=e.createdAt?.toMillis()||0;return(t.createdAt?.toMillis()||0)-r})}catch(e){if("permission-denied"===e.code)throw Error("Permission denied. Please ensure you are signed in.");if(e.message)throw Error(e.message);throw Error("Failed to fetch watchlist. Please try again.")}}static async addToWatchlist(e,t,r){try{let s=(0,a.IO)((0,a.hJ)(n.db,"watchlist"),(0,a.ar)("uid","==",e),(0,a.ar)("symbol","==",t.toUpperCase()));if(!(await (0,a.PL)(s)).empty)throw Error(`${t.toUpperCase()} is already in your watchlist`);await (0,a.ET)((0,a.hJ)(n.db,"watchlist"),{symbol:t.toUpperCase(),name:r,uid:e,createdAt:a.EK.now(),updatedAt:a.EK.now()})}catch(e){throw e}}static async removeFromWatchlist(e,t){try{if(!n.db)throw Error("Firebase database not initialized");let r=(0,a.JU)(n.db,"watchlist",t),s=await (0,a.QT)(r);if(!s.exists())throw Error("Watchlist item not found");if(s.data().uid!==e)throw Error("Insufficient permissions to remove this watchlist item");await (0,a.oe)(r)}catch(e){if("permission-denied"===e.code)throw Error("Permission denied. Please ensure you are signed in and own this item.");if("not-found"===e.code)throw Error("Watchlist item not found. It may have already been removed.");if(e.message)throw Error(e.message);throw Error("Failed to remove watchlist item. Please try again.")}}}var c=r(87433),d=r(79179),u=r(91970);function p(){let{isAuthenticated:e,user:t,signInWithGoogle:r,logout:a}=(0,o.a)(),{watchlist:n,loading:p,error:x,addToWatchlist:h,removeFromWatchlist:g}=function(){let{isAuthenticated:e,user:t}=(0,o.a)(),[r,s]=(0,i.useState)([]),[a,n]=(0,i.useState)(!0),[d,u]=(0,i.useState)(null),p=r.map(e=>e.symbol),{data:x,loading:h}=(0,c.vR)(p,3e4),g=(0,i.useCallback)(async()=>{if(!e||!t){s([]),n(!1);return}try{n(!0),u(null);let e=await l.getWatchlist(t.uid);s(e)}catch(e){u(e instanceof Error?e.message:"Failed to load watchlist")}finally{n(!1)}},[e,t]);return{watchlist:r,loading:a||h,error:d,addToWatchlist:(0,i.useCallback)(async(r,s)=>{if(!e||!t)throw Error("Must be signed in to add to watchlist");try{await l.addToWatchlist(t.uid,r,s),await g()}catch(e){throw e}},[e,t,g]),removeFromWatchlist:(0,i.useCallback)(async r=>{if(!e||!t)throw Error("Must be signed in to remove from watchlist");try{await l.removeFromWatchlist(t.uid,r),await g()}catch(e){throw e}},[e,t,g]),loadWatchlist:g}}(),[m,f]=(0,i.useState)(""),[y,v]=(0,i.useState)([]),[b,w]=(0,i.useState)(!1),[j,S]=(0,i.useState)(!1);(0,i.useCallback)(async e=>{if(e.length<2){v([]),w(!1);return}S(!0);try{let t=[{symbol:"AAPL",name:"Apple Inc.",exchange:"NASDAQ"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ"},{symbol:"MSFT",name:"Microsoft Corporation",exchange:"NASDAQ"},{symbol:"GOOGL",name:"Alphabet Inc.",exchange:"NASDAQ"},{symbol:"AMZN",name:"Amazon.com Inc.",exchange:"NASDAQ"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ"},{symbol:"VOD.L",name:"Vodafone Group PLC",exchange:"LSE"},{symbol:"TSCO.L",name:"Tesco PLC",exchange:"LSE"},{symbol:"BP.L",name:"BP PLC",exchange:"LSE"}].filter(t=>t.symbol.toLowerCase().includes(e.toLowerCase())||t.name.toLowerCase().includes(e.toLowerCase()));v(t.slice(0,5)),w(!0)}catch(e){}finally{S(!1)}},[]);let k=async e=>{if(e.preventDefault(),m.trim())try{if(n.some(e=>e.symbol===m.toUpperCase())){alert(`${m.toUpperCase()} is already in your watchlist`);return}let e=y.find(e=>e.symbol===m.toUpperCase()),t=e?e.name:`${m.toUpperCase()} Corp.`;await h(m.toUpperCase(),t),f(""),w(!1)}catch(e){alert(e instanceof Error?e.message:"Failed to add to watchlist")}},C=e=>{f(e.symbol),w(!1)},q=async e=>{try{await g(e)}catch(e){alert(e instanceof Error?e.message:"Failed to remove from watchlist")}};return e?(0,s.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",background:"var(--bg)",color:"var(--text)"},children:[s.jsx(d.Z,{title:"Watchlist - Pocket Portfolio",description:"Track your favorite stocks and investments"}),s.jsx(u.Z,{title:"Watchlist"}),(0,s.jsxs)("main",{style:{flex:1,padding:"20px",maxWidth:"1200px",margin:"0 auto",width:"100%"},children:[s.jsx("div",{style:{marginBottom:"32px"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[s.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},children:s.jsx("span",{style:{fontSize:"24px"},children:"\uD83D\uDCC8"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",margin:"0 0 4px 0",color:"var(--text)"},children:"Watchlist"}),s.jsx("p",{style:{color:"var(--muted)",fontSize:"16px",margin:0},children:"Track your favorite stocks and get real-time updates"})]})]})}),(0,s.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"12px",padding:"20px",marginBottom:"24px",position:"relative"},children:[s.jsx("h3",{style:{fontSize:"18px",marginBottom:"16px"},children:"Add to Watchlist"}),(0,s.jsxs)("form",{onSubmit:k,style:{display:"flex",gap:"12px",position:"relative"},children:[(0,s.jsxs)("div",{style:{flex:1,position:"relative"},children:[s.jsx("input",{type:"text",value:m,onChange:e=>f(e.target.value.toUpperCase()),onFocus:()=>w(y.length>0),placeholder:"Search for stocks (e.g., AAPL, Apple, Tesla)",style:{width:"100%",padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--bg)",color:"var(--text)",fontSize:"16px"}}),b&&y.length>0&&s.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:y.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>C(e),style:{padding:"12px 16px",cursor:"pointer",borderBottom:t<y.length-1?"1px solid var(--border)":"none",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="var(--bg)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:[(0,s.jsxs)("div",{children:[s.jsx("div",{style:{fontWeight:"600",fontSize:"14px"},children:e.symbol}),s.jsx("div",{style:{fontSize:"12px",color:"var(--muted)"},children:e.name})]}),s.jsx("div",{style:{fontSize:"12px",color:"var(--muted)"},children:e.exchange})]},e.symbol))}),j&&s.jsx("div",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",fontSize:"14px",color:"var(--muted)"},children:"\uD83D\uDD0D"})]}),s.jsx("button",{type:"submit",style:{background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:"Add"})]}),b&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:()=>w(!1)})]}),x&&s.jsx("div",{style:{background:"var(--danger)",color:"white",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:x}),p?(0,s.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"12px",padding:"40px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"24px",marginBottom:"16px"},children:"â³"}),s.jsx("p",{children:"Loading watchlist..."})]}):0===n.length?(0,s.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"12px",padding:"40px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCC8"}),s.jsx("h3",{style:{fontSize:"20px",marginBottom:"8px"},children:"No items in watchlist"}),s.jsx("p",{style:{color:"var(--muted)",marginBottom:"24px"},children:"Add some stocks to track their performance"})]}):(0,s.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"12px",overflow:"hidden"},children:[(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr auto",gap:"16px",padding:"16px 20px",background:"var(--bg)",borderBottom:"1px solid var(--border)",fontWeight:"600",fontSize:"14px",color:"var(--muted)"},children:[s.jsx("div",{children:"Symbol"}),s.jsx("div",{children:"Price"}),s.jsx("div",{children:"Change"}),s.jsx("div",{children:"Change %"}),s.jsx("div",{children:"Actions"})]}),n.map((e,t)=>(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr auto",gap:"16px",padding:"16px 20px",borderBottom:t<n.length-1?"1px solid var(--border)":"none",alignItems:"center"},children:[(0,s.jsxs)("div",{children:[s.jsx("div",{style:{fontWeight:"600",fontSize:"16px"},children:e.symbol}),s.jsx("div",{style:{fontSize:"12px",color:"var(--muted)"},children:e.name})]}),s.jsx("div",{style:{fontWeight:"600"},children:void 0!==e.price?(0,s.jsxs)(s.Fragment,{children:["GBP"===e.currency?"\xa3":"$",e.price.toFixed(2)]}):s.jsx("span",{style:{color:"var(--muted)"},children:"Loading..."})}),s.jsx("div",{style:{color:void 0!==e.change?e.change>=0?"var(--pos)":"var(--neg)":"var(--muted)",fontWeight:"600"},children:void 0!==e.change?(0,s.jsxs)(s.Fragment,{children:[e.change>=0?"+":"",e.change.toFixed(2)]}):s.jsx("span",{style:{color:"var(--muted)"},children:"-"})}),s.jsx("div",{style:{color:void 0!==e.changePercent?e.changePercent>=0?"var(--pos)":"var(--neg)":"var(--muted)",fontWeight:"600"},children:void 0!==e.changePercent?(0,s.jsxs)(s.Fragment,{children:[e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]}):s.jsx("span",{style:{color:"var(--muted)"},children:"-"})}),s.jsx("button",{onClick:()=>q(e.id),style:{background:"var(--danger)",color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",fontSize:"12px",cursor:"pointer"},children:"Remove"})]},e.id||e.symbol))]})]})]}):(0,s.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",background:"var(--bg)",color:"var(--text)"},children:[s.jsx(d.Z,{title:"Watchlist - Pocket Portfolio",description:"Track your favorite stocks and investments"}),s.jsx(u.Z,{title:"Watchlist"}),s.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:(0,s.jsxs)("div",{style:{textAlign:"center"},children:[s.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px"},children:"Sign in to view watchlist"}),s.jsx("p",{style:{color:"var(--muted)",marginBottom:"24px"},children:"Track your favorite stocks and get real-time updates"}),s.jsx("button",{onClick:r,style:{background:"linear-gradient(135deg, var(--accent-warm) 0%, #f59e0b 100%)",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Sign in with Google"})]})})]})}},35387:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\fitne\OneDrive\pocket-portfolio-app\app\watchlist\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,629,404,285,216,263,845,970],()=>r(81860));module.exports=s})();