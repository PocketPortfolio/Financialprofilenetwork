"use strict";(()=>{var t={};t.id=642,t.ids=[642],t.modules={20399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},20070:(t,e,a)=>{a.r(e),a.d(e,{originalPathname:()=>y,patchFetch:()=>w,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var r={};a.r(r),a.d(r,{GET:()=>l});var n=a(49303),o=a(88716),s=a(60670),i=a(87070);async function l(){try{let t,e;let a=Date.now(),r=(await Promise.allSettled([c(),u(),h()])).map((t,e)=>"fulfilled"===t.status?t.value:{name:["Yahoo Finance (Quote)","Yahoo Finance (Chart)","Stooq"][e],status:"Unhealthy",lastUpdate:new Date().toISOString(),responseTime:0,errorRate:100,dataQuality:0}),n=r.filter(t=>"Fresh"===t.status).length,o=r.filter(t=>"Fallback"===t.status).length,s=r.filter(t=>"Unhealthy"===t.status).length;return n>0?(t="Fresh",e=`${n} primary source(s) operational`):o>0?(t="Fallback",e=`Using ${o} fallback source(s)`):(t="Unhealthy",e="All data sources unavailable"),i.NextResponse.json({overallStatus:t,message:e,sources:r,timestamp:new Date().toISOString(),responseTime:Date.now()-a,ragAssessment:{fresh:n,fallback:o,unhealthy:s}})}catch(t){return i.NextResponse.json({overallStatus:"Unhealthy",message:"RAG health assessment failed",error:t instanceof Error?t.message:"Unknown error",timestamp:new Date().toISOString()},{status:500})}}async function c(){let t=Date.now();try{let e=await fetch("https://query1.finance.yahoo.com/v7/finance/quote?symbols=AAPL",{headers:{"User-Agent":"Mozilla/5.0 (PocketPortfolio)",Accept:"application/json"},cache:"no-store"}),a=Date.now()-t,r=await e.json();if(e.ok&&r.quoteResponse?.result?.[0])return{name:"Yahoo Finance (Quote)",status:"Fresh",lastUpdate:new Date().toISOString(),responseTime:a,errorRate:0,dataQuality:95};return{name:"Yahoo Finance (Quote)",status:"Fallback",lastUpdate:new Date().toISOString(),responseTime:a,errorRate:10,dataQuality:70}}catch(e){return{name:"Yahoo Finance (Quote)",status:"Unhealthy",lastUpdate:new Date().toISOString(),responseTime:Date.now()-t,errorRate:100,dataQuality:0}}}async function u(){let t=Date.now();try{let e=await fetch("https://query2.finance.yahoo.com/v8/finance/chart/AAPL?range=1d&interval=1m",{headers:{"User-Agent":"Mozilla/5.0 (PocketPortfolio)",Accept:"application/json"},cache:"no-store"}),a=Date.now()-t,r=await e.json();if(e.ok&&r.chart?.result?.[0]?.timestamp)return{name:"Yahoo Finance (Chart)",status:"Fresh",lastUpdate:new Date().toISOString(),responseTime:a,errorRate:0,dataQuality:90};return{name:"Yahoo Finance (Chart)",status:"Fallback",lastUpdate:new Date().toISOString(),responseTime:a,errorRate:15,dataQuality:65}}catch(e){return{name:"Yahoo Finance (Chart)",status:"Unhealthy",lastUpdate:new Date().toISOString(),responseTime:Date.now()-t,errorRate:100,dataQuality:0}}}async function h(){let t=Date.now();try{let e=await fetch("https://stooq.com/q/l/?s=aapl&f=sd2t2ohlcv&h&e=csv",{headers:{"User-Agent":"Mozilla/5.0 (PocketPortfolio)",Accept:"text/csv"},cache:"no-store"}),a=Date.now()-t,r=await e.text();if(e.ok&&r.includes("AAPL"))return{name:"Stooq",status:"Fresh",lastUpdate:new Date().toISOString(),responseTime:a,errorRate:0,dataQuality:85};return{name:"Stooq",status:"Fallback",lastUpdate:new Date().toISOString(),responseTime:a,errorRate:20,dataQuality:60}}catch(e){return{name:"Stooq",status:"Unhealthy",lastUpdate:new Date().toISOString(),responseTime:Date.now()-t,errorRate:100,dataQuality:0}}}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/health-price/route",pathname:"/api/health-price",filename:"route",bundlePath:"app/api/health-price/route"},resolvedPagePath:"C:\\Users\\fitne\\OneDrive\\pocket-portfolio-app\\app\\api\\health-price\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:f}=p,y="/api/health-price/route";function w(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}}};var e=require("../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),r=e.X(0,[948,972],()=>a(20070));module.exports=r})();