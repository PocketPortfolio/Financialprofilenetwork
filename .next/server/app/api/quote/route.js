"use strict";(()=>{var e={};e.id=774,e.ids=[774],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},22281:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>I,requestAsyncStorage:()=>m,routeModule:()=>A,serverHooks:()=>g,staticGenerationAsyncStorage:()=>N});var n={};r.r(n),r.d(n,{GET:()=>C});var o=r(49303),a=r(88716),c=r(60670),i=r(87070);let l={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"application/json","Accept-Language":"en-US,en;q=0.9","Accept-Encoding":"gzip, deflate, br","Cache-Control":"no-cache",Pragma:"no-cache"},s={"MICROSOFT CORPORATION":"MSFT","JPMORGAN CHASE & CO.":"JPM","TESLA, INC.":"TSLA","VISA INC. CLASS A":"V","THE COCAâ€‘COLA COMPANY":"KO","APPLE INC.":"AAPL","NETFLIX, INC.":"NFLX","INTEL CORPORATION":"INTC","THE WALT DISNEY COMPANY":"DIS","PEPSICO, INC.":"PEP","TAIWAN SEMICONDUCTOR (ADR)":"TSM","MERCK & CO., INC.":"MRK","ADVANCED MICRO DEVICES, INC.":"AMD","NVIDIA CORPORATION":"NVDA","ALPHABET INC. CLASS A":"GOOGL","MASTERCARD INC. CLASS A":"MA","AMAZON.COM, INC.":"AMZN","PFIZER INC.":"PFE","META PLATFORMS, INC. CLASS A":"META","BERKSHIRE HATHAWAY INC. CLASS B":"BRK.B"};async function u(e){return[]}async function p(e){let t=`https://query2.finance.yahoo.com/v8/finance/chart/${encodeURIComponent(e)}?range=1d&interval=1m`,r=await fetch(t,{headers:l});if(!r.ok)throw Error(`chart_${r.status}`);let n=await r.json(),o=n?.chart?.result?.[0],a=o?.meta?.regularMarketPrice,c=o?.meta?.previousClose;if("number"==typeof a&&"number"==typeof c){let t=a-c,r=t/c*100;return{symbol:e.toUpperCase(),name:e.toUpperCase(),price:a,change:Number.isFinite(t)?t:null,changePct:Number.isFinite(r)?r:null,currency:o?.meta?.currency||"",source:"yahoo_chart"}}let i=(o?.indicators?.quote?.[0]?.close||[]).filter(e=>"number"==typeof e);if(!i.length)throw Error("no_px");let s=i[i.length-1],u=i.find(e=>"number"==typeof e),p=s-u,h=u?p/u*100:null;return{symbol:e.toUpperCase(),name:e.toUpperCase(),price:s??null,change:Number.isFinite(p)?p:null,changePct:Number.isFinite(h)?h:null,currency:o?.meta?.currency||"",source:"yahoo_chart"}}async function h(e){let t=`https://stooq.com/q/l/?s=${encodeURIComponent(e.toLowerCase())}&f=sd2t2ohlcv&h&e=csv`,r=await fetch(t,{headers:{"User-Agent":l["User-Agent"],Accept:"text/csv"}});if(!r.ok)throw Error(`stooq_${r.status}`);let[,...n]=(await r.text()).trim().split(/\r?\n/);if(!n.length)throw Error("stooq_empty");let o=n[0].split(","),a=parseFloat(o[6]),c=parseFloat(o[3]),i=Number.isFinite(a)&&Number.isFinite(c)?a-c:null,s=Number.isFinite(i)&&null!==i&&c?i/c*100:null;return{price:Number.isFinite(a)?a:null,change:i,changePct:s,currency:""}}async function C(e){try{let{searchParams:t}=new URL(e.url),r=(t.get("symbols")||"").trim(),n=[...new Set(r.split(",").map(e=>e.trim().toUpperCase()).filter(Boolean))].slice(0,100);if(!n.length)return i.NextResponse.json([]);let o=n.map(e=>{let t=e.trim().toUpperCase();return["ADR","INC.","CORPORATION","COMPANY","CO.","LTD","LLC","INC","CORP"].includes(t)||t.length<2?{original:e,ticker:null}:t.length<=5&&!t.includes(" ")?{original:e,ticker:t}:{original:e,ticker:s[t]||t}}).filter(e=>null!==e.ticker),a=[...new Set(o.map(e=>e.ticker))],c=[];try{c=await u(a)}catch(e){}let l=new Map(c.map(e=>[e.symbol,e])),C=[];for(let{original:e,ticker:t}of o){let r=l.get(t)||{symbol:e,name:e,price:null,change:null,changePct:null,currency:"",source:"none"};if(null==r.changePct||null==r.price)try{let e=await p(t);null!==e.price&&(r.price=e.price,r.change=e.change,r.changePct=e.changePct,r.currency=e.currency,r.source="yahoo_chart")}catch{try{let e=await h(t);r.price??=e.price,r.change??=e.change,r.changePct??=e.changePct,r.currency||(r.currency=e.currency),"none"===r.source&&(r.source="stooq")}catch{}}C.push(r)}let A=C.every(e=>"yahoo"===e.source)?"yahoo":C.every(e=>"stooq"===e.source)?"stooq":"mixed";return i.NextResponse.json(C,{headers:{"Cache-Control":"s-maxage=20, stale-while-revalidate=60","X-Data-Source":A,"X-Data-Timestamp":new Date().toISOString()}})}catch(e){return i.NextResponse.json({error:"Failed to fetch quotes"},{status:500})}}let A=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/quote/route",pathname:"/api/quote",filename:"route",bundlePath:"app/api/quote/route"},resolvedPagePath:"C:\\Users\\fitne\\OneDrive\\pocket-portfolio-app\\app\\api\\quote\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:N,serverHooks:g}=A,y="/api/quote/route";function I(){return(0,c.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:N})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(22281));module.exports=n})();